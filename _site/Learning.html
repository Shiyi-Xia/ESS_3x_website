<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="pandoc" />

    
    
    <title>Learning</title>

        <script src="site_libs/header-attrs-2.14/header-attrs.js"></script>
        <script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link href="site_libs/bootstrap-3.3.7/css/bootstrap.min.css" rel="stylesheet" />
        <script src="site_libs/bootstrap-3.3.7/js/bootstrap.min.js"></script>
        <script src="site_libs/navigation-1.1/tabsets.js"></script>
        <link href="site_libs/magnific-popup-1.1.0/magnific-popup.css" rel="stylesheet" />
        <script src="site_libs/magnific-popup-1.1.0/jquery.magnific-popup.min.js"></script>
        <link href="site_libs/clean-0.1/clean.css" rel="stylesheet" />
        <script src="site_libs/clean-0.1/clean.js"></script>
    
    
        <style type="text/css">code{white-space: pre;}</style>
    <style type="text/css">
      pre > code.sourceCode { white-space: pre; position: relative; }
      pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
      pre > code.sourceCode > span:empty { height: 1.2em; }
      .sourceCode { overflow: visible; }
      code.sourceCode > span { color: inherit; text-decoration: inherit; }
      div.sourceCode { margin: 1em 0; }
      pre.sourceCode { margin: 0; }
      @media screen {
      div.sourceCode { overflow: auto; }
      }
      @media print {
      pre > code.sourceCode { white-space: pre-wrap; }
      pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
      }
      pre.numberSource code
        { counter-reset: source-line 0; }
      pre.numberSource code > span
        { position: relative; left: -4em; counter-increment: source-line; }
      pre.numberSource code > span > a:first-child::before
        { content: counter(source-line);
          position: relative; left: -1em; text-align: right; vertical-align: baseline;
          border: none; display: inline-block;
          -webkit-touch-callout: none; -webkit-user-select: none;
          -khtml-user-select: none; -moz-user-select: none;
          -ms-user-select: none; user-select: none;
          padding: 0 4px; width: 4em;
          color: #aaaaaa;
        }
      pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
      div.sourceCode
        {  background-color: #f8f8f8; }
      @media screen {
      pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
      }
      code span.al { color: #ef2929; } /* Alert */
      code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
      code span.at { color: #c4a000; } /* Attribute */
      code span.bn { color: #0000cf; } /* BaseN */
      code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
      code span.ch { color: #4e9a06; } /* Char */
      code span.cn { color: #000000; } /* Constant */
      code span.co { color: #8f5902; font-style: italic; } /* Comment */
      code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
      code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
      code span.dt { color: #204a87; } /* DataType */
      code span.dv { color: #0000cf; } /* DecVal */
      code span.er { color: #a40000; font-weight: bold; } /* Error */
      code span.ex { } /* Extension */
      code span.fl { color: #0000cf; } /* Float */
      code span.fu { color: #000000; } /* Function */
      code span.im { } /* Import */
      code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
      code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
      code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
      code span.ot { color: #8f5902; } /* Other */
      code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
      code span.sc { color: #000000; } /* SpecialChar */
      code span.ss { color: #4e9a06; } /* SpecialString */
      code span.st { color: #4e9a06; } /* String */
      code span.va { color: #000000; } /* Variable */
      code span.vs { color: #4e9a06; } /* VerbatimString */
      code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
    </style>
    
    
    <!-- tabsets -->
    <script>
      $(document).ready(function () {
	  window.buildTabsets("toc");
      });
      $(document).ready(function () {
	  $('.tabset-dropdown > .nav-tabs > li').click(function () {
	      $(this).parent().toggleClass('nav-tabs-open')
	  });
      });
    </script>

    <!-- code folding -->
    
    <!-- code download -->
    
    <!-- tabsets dropdown -->

    <style type="text/css">
      .tabset-dropdown > .nav-tabs {
	  display: inline-table;
	  max-height: 500px;
	  min-height: 44px;
	  overflow-y: auto;
	  background: white;
	  border: 1px solid #ddd;
	  border-radius: 4px;
      }
      
      .tabset-dropdown > .nav-tabs > li.active:before {
	  content: "";
	  font-family: 'Glyphicons Halflings';
	  display: inline-block;
	  padding: 10px;
	  border-right: 1px solid #ddd;
      }
      
      .tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
	  content: "&#xe258;";
	  border: none;
      }
      
      .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
	  content: "";
	  font-family: 'Glyphicons Halflings';
	  display: inline-block;
	  padding: 10px;
	  border-right: 1px solid #ddd;
      }
      
      .tabset-dropdown > .nav-tabs > li.active {
	  display: block;
      }

      .tabset-dropdown > .nav-tabs > li.active a {
  	  padding: 0 15px !important;
      }

      .tabset-dropdown > .nav-tabs > li > a,
      .tabset-dropdown > .nav-tabs > li > a:focus,
      .tabset-dropdown > .nav-tabs > li > a:hover {
	  border: none;
	  display: inline-block;
	  border-radius: 4px;
	  background-color: transparent;
      }
      
      .tabset-dropdown > .nav-tabs.nav-tabs-open > li {
	  display: block;
	  float: none;
      }
      
      .tabset-dropdown > .nav-tabs > li {
	  display: none;
	  margin-left: 0 !important;
      }
    </style>
    
</head>

<body class="preload">

      <!-- html_clean start -->
   <div class="container-fluid main-container">
     <div class="row">
       <div class="col-md-10">
   	
            
   
      
      <div class="navbar navbar-default  navbar-fixed-top" role="navigation">
        <div class="container">
          <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="index.html">ESS-3X: Introduction to R</a>
          </div>
          <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
              <li>
        <a href="index.html">Home</a>
      </li>
      <li>
        <a href="Learning.html">Learning</a>
      </li>
      <li>
        <a href="Exercise.html">Exercises</a>
      </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
              
            </ul>
          </div><!--/.nav-collapse -->
        </div><!--/.container -->
      </div><!--/.navbar -->
        
      <h1 class="title">Learning</h1>
      
        

      <!-- html_clean authors -->
         
      
   
<!-- Don't indent these lines or it will mess pre blocks indentation --> 
<div id="content">
<div id="packages-needed" class="section level2">
<h2>Packages needed</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages(c(&quot;dplyr&quot;,&quot;haven&quot;,&quot;readr&quot;, &quot;tidyr&quot;,&quot;ggplot2&quot;,&quot;texreg&quot;,&quot;stringr&quot;,&quot;stringi&quot;,&quot;WDI&quot;))</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(haven)        <span class="co"># Import Data</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)        <span class="co"># Import Data</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)        <span class="co"># Data manipulation</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)      <span class="co"># Creating graphics</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)      <span class="co"># Deal with string data</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra)   <span class="co"># Build complex tables and manipulate table styles</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(WDI)          <span class="co"># Get data from the World Bank&#39;s API</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(psych)        <span class="co"># We use the describe() function from this package for summary statistics.</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(texreg)       <span class="co"># Convert regression output to Table</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stargazer)    <span class="co"># Convert regression output to Table</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(equatiomatic) <span class="co"># Provide an automatic way to show the equations of models fitted in R.</span></span></code></pre></div>
</div>
<div id="basic-r" class="section level1">
<h1>Basic R</h1>
<div id="r-data-type" class="section level2">
<h2>R Data Type</h2>
<p>What are the main types of data we will deal with?<br />
They can be:<br />
1. <strong>Number</strong></p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="dv">0</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fl">1.5</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span><span class="sc">/</span><span class="dv">4</span></span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li><strong>String or Character</strong>:</li>
</ol>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;Hello world&quot;</span></span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li><p><strong>Category</strong>:</p>
<p>We will talk about this in a bit.</p></li>
<li><p><strong>Logical</strong>: (MUST use uppercase):</p>
<ul>
<li><p><strong>TRUE</strong></p></li>
<li><p><strong>FALSE</strong></p></li>
</ul></li>
</ol>
<p>Or we can use <strong>T</strong> and <strong>F</strong>.</p>
<ol start="5" style="list-style-type: decimal">
<li><p>Special Cases</p>
<ul>
<li><p>NA: missing data - the most important for today’s
purposes</p></li>
<li><p>NaN: not a number - will only happen if something has gone
wrong!</p></li>
<li><p>NULL: basically an undefined value - there’s nothing there (not
even missing data!)</p></li>
</ul></li>
</ol>
</div>
<div id="creating-and-assigning-objects" class="section level2">
<h2>Creating and assigning objects</h2>
<ul>
<li><strong>Everything that exits in R is an object.</strong></li>
</ul>
<p>Data types can be contained in R objects. By creating an object, we
save the information to our working environment so that we can recall it
whenever we want by just running the name of the object.</p>
<p><br />
In RStudio we make vast use of the <code>&lt;-</code> operator to assign
values to objects. We can obtain the operator quickly by typing the
“alt” + “-” keys together.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="dv">2</span></span></code></pre></div>
<p>The above code assigns the value of ‘2’ to an object called a.<br />
Notice that a is now in our <em>global environment</em> in the top-right
part of RStudio (unless you’ve changed your settings).</p>
<p>We can access the contents of a by running it as code:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>a</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<p>Normally, we could give the self-explanatory names to the
objects:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>my_string <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;hello&quot;</span>,<span class="st">&quot;world&quot;</span>,<span class="st">&quot;today&quot;</span>,<span class="st">&quot;is&quot;</span>,<span class="st">&quot;amazing&quot;</span>)</span></code></pre></div>
</div>
<div id="logical-operators" class="section level2">
<h2>Logical Operators</h2>
<div id="equal" class="section level3">
<h3>Equal</h3>
<p><code>==</code> asks whether two values are the same or equal</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>a <span class="sc">==</span> my_string</span></code></pre></div>
<pre><code>## [1] FALSE FALSE FALSE FALSE FALSE</code></pre>
</div>
<div id="not-equal" class="section level3">
<h3>Not Equal</h3>
<p><code>!=</code> asks whether two values are not the same or
equal.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>a <span class="sc">!=</span> my_string</span></code></pre></div>
<pre><code>## [1] TRUE TRUE TRUE TRUE TRUE</code></pre>
</div>
<div id="greater-or-smaller" class="section level3">
<h3>Greater or Smaller</h3>
<p>We can also test whether certain values are:</p>
<ul>
<li><p><code>&gt;</code> greater than;</p></li>
<li><p><code>&lt;</code> smaller than;</p></li>
<li><p><code>&gt;=</code> greater or equals</p></li>
<li><p><code>&lt;=</code> smaller or equals</p></li>
</ul>
</div>
<div id="combine-logical-operators" class="section level3">
<h3>Combine Logical Operators</h3>
<ul>
<li><p><code>&amp;</code> stands for “and” (not very
surprising)</p></li>
<li><p><code>|</code> stands for “or”</p></li>
</ul>
</div>
</div>
<div id="functions" class="section level2">
<h2>Functions</h2>
<p>You may have noticed that so far we’ve seen the following math
operators: <code>*</code> <code>/</code> <code>+</code> <code>-</code>
<code>^</code> (multiplication, division, addition, subtraction,
exponentiation). But how do we get the square root of something?</p>
<p>We use the sqrt() function:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(<span class="dv">4</span>)</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<p>The real power of R is in its functions. Both base R and many
packages (we’ll get onto these in a bit) have many useful functions for
us to use. The trick of course is in learning how to understand and find
functions. The best place to begin (if you know a function’s name) is by
putting a question mark before it, dropping the parentheses and running
it:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>?sqrt</span></code></pre></div>
<p>As you can see, this opens the function’s documentation in the help
panel in the bottom-right of RStudio. These documents can be a little
daunting sometimes, but you’ll get used to them. The most important
parts are:</p>
<ul>
<li><p>Usage - this shows us what order the arguments are in and what
defaults if there are any.</p></li>
<li><p>Arguments - these tell us what *inputs* the function is
expecting</p></li>
<li><p>Value - this tells us what *output* we expect from the function -
note that sqrt()’s documentation doesn’t have the value header but DOES
describe the output under details</p></li>
<li><p>Many documentations also include examples at the bottom.</p></li>
</ul>
<p>That may have been a lot - let’s look at another example:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>?log</span></code></pre></div>
<p>Notice for log() we have TWO arguments. The first is our input (x),
the second is the base of the logarithm. Notice that the default is that
we use the natural logarithm. If there is a default argument, R will use
this UNLESS you overwrite it!</p>
<p>To take the base 10 logarithm of the number 2:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span>(<span class="dv">2</span>, <span class="dv">10</span>)</span></code></pre></div>
<pre><code>## [1] 0.30103</code></pre>
<p>Notice that we don’t need to explicitly name arguments. If we don’t
name our arguments, R will assume that we’re giving them in the order
listed in the ‘usage’ section of the documentation. Notice also that we
can ‘chain’ functions together:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span>(<span class="fu">sqrt</span>(<span class="dv">4</span>), <span class="dv">10</span>) <span class="co"># gives exactly the same as log(2, 10) above as sqrt(4) = 2</span></span></code></pre></div>
<pre><code>## [1] 0.30103</code></pre>
<p>The evaluation order for R is inside to outside. In other words, R
will evaluate the function on the inside first, and the one on the
outside second. If you don’t know the name of a function or want to find
one, google is your best friend. A big chunk of getting good at R is
going to be getting good at finding what you need via google.</p>
<p>For example, to find the <a
href="https://www.google.com/search?q=r+exponential+function&amp;oq=R+exponential+function&amp;aqs=chrome.0.0l2j0i22i30l4j69i60l2.3764j0j4&amp;sourceid=chrome&amp;ie=UTF-8">exponential
function</a>.</p>
<p>Let’s try one more before we move on:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>?paste</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(<span class="st">&quot;This&quot;</span>, <span class="st">&quot;is&quot;</span>, <span class="st">&quot;a&quot;</span>, <span class="st">&quot;full&quot;</span>, <span class="st">&quot;sentence&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;This is a full sentence&quot;</code></pre>
<p>Notice the “…” in the arguments. This means we can give it as many
inputs as we want, BUT we’ll need to explicity name any further
arguments:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(<span class="st">&quot;This&quot;</span>, <span class="st">&quot;is&quot;</span>, <span class="st">&quot;a&quot;</span>, <span class="st">&quot;full&quot;</span>, <span class="st">&quot;sentence&quot;</span>, <span class="at">sep=</span><span class="st">&quot;-&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;This-is-a-full-sentence&quot;</code></pre>
</div>
<div id="data-structures" class="section level2">
<h2>Data Structures</h2>
<p>There are many types of objects in R. Today we focus our attention
on:<br />
1) Vectors<br />
2) Matrices (2-dimensional vectors)<br />
3) Data Frames<br />
4) Lists</p>
<div id="vectors" class="section level3">
<h3>Vectors</h3>
<p>Vectors are one-dimensional objects that can have different lengths
and can contain different values, but all of the same nature (all
numeric, all characters, all logical…)</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>my.first.vector <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">6</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">12</span>, <span class="fl">2.4</span>, <span class="fl">0.3</span>, <span class="sc">-</span><span class="fl">2.56</span>, <span class="dv">3</span><span class="sc">/</span><span class="dv">4</span>, <span class="dv">2</span><span class="sc">+</span><span class="dv">3</span>)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="co"># the c() function stands for &quot;concatenate&quot; and is used to join objects together</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>my.first.vector</span></code></pre></div>
<pre><code>##  [1]  1.00  5.00  2.00  6.00  8.00  9.00 12.00  2.40  0.30 -2.56  0.75  5.00</code></pre>
<p>How long is my vector?</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(my.first.vector)</span></code></pre></div>
<pre><code>## [1] 12</code></pre>
<p>You can access the value of a specific element in your vector using
squared brackets:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>my.first.vector[<span class="dv">8</span>] <span class="co"># the value of the eighth element in our vector</span></span></code></pre></div>
<pre><code>## [1] 2.4</code></pre>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>my.first.vector[<span class="dv">1</span>] <span class="co"># the value of the first element in our vector</span></span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<p>We can also store string elements in our vector:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>a.string.vector <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;here&quot;</span>, <span class="st">&quot;are&quot;</span>, <span class="st">&quot;some&quot;</span>, <span class="st">&quot;elements&quot;</span>)</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>a.string.vector</span></code></pre></div>
<pre><code>## [1] &quot;here&quot;     &quot;are&quot;      &quot;some&quot;     &quot;elements&quot;</code></pre>
<p>What data type is in the vector?</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(my.first.vector)</span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(a.string.vector)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<p>Again, paste() is a useful function to use with strings:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>c <span class="ot">&lt;-</span> <span class="st">&quot;hello&quot;</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="st">&quot;world&quot;</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(c, d, <span class="at">sep =</span> <span class="st">&quot;&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;helloworld&quot;</code></pre>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(c, d)</span></code></pre></div>
<pre><code>## [1] &quot;hello&quot; &quot;world&quot;</code></pre>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(c, d, <span class="at">sep =</span> <span class="st">&quot;,&quot;</span>) <span class="co"># specifies the separator of the two objects!</span></span></code></pre></div>
<pre><code>## [1] &quot;hello,world&quot;</code></pre>
<p>paste0() is a similar function,which by default puts no
separator:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">paste0</span>(c, d)</span></code></pre></div>
<pre><code>## [1] &quot;helloworld&quot;</code></pre>
<p>Our vector can be a vector of factors. This is used to create
categorical variables.</p>
</div>
<div id="matrix" class="section level3">
<h3>Matrix</h3>
<p>A matrix is a two-dimensional vector. Besides being two-dimensional,
the same rules of vectors apply to matrix: a matrix can only contain
data of the same type.<br />
Suppose we want a 3x4 matrix with numbers from 1 to 12 in its cells:</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="at">data =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>,  <span class="co"># the data in our matrix. Pick all integers from 1 to 12 (included)</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>            <span class="at">nrow =</span> <span class="dv">3</span>,     <span class="co"># the number of rows </span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">ncol =</span> <span class="dv">4</span>,     <span class="co"># the number of columns</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">byrow =</span> <span class="cn">TRUE</span>) <span class="co"># do we want data to be stored in cells by row or by column?</span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>m</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4]
## [1,]    1    2    3    4
## [2,]    5    6    7    8
## [3,]    9   10   11   12</code></pre>
<p>We can access an individual element of a matrix in R by specifying
its position.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>m[<span class="dv">2</span>,<span class="dv">4</span>] <span class="co"># the object in the 2nd row, 4th column</span></span></code></pre></div>
<pre><code>## [1] 8</code></pre>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>m[,<span class="dv">1</span>]  <span class="co"># all the first column</span></span></code></pre></div>
<pre><code>## [1] 1 5 9</code></pre>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>m[<span class="dv">1</span>,]  <span class="co"># all the first row</span></span></code></pre></div>
<pre><code>## [1] 1 2 3 4</code></pre>
<p>We can also give names to columns and rows.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(m) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;one&quot;</span>, <span class="st">&quot;two&quot;</span>, <span class="st">&quot;three&quot;</span>, <span class="st">&quot;four&quot;</span>)</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(m) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>)</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>m</span></code></pre></div>
<pre><code>##   one two three four
## a   1   2     3    4
## b   5   6     7    8
## c   9  10    11   12</code></pre>
<p>I won’t be showing you matrix algebra in action during this class
(you’re unlikely to need it outside of introductory exercises and
advanced programming). But to summarise the available functions:</p>
<ul>
<li><span class="math inline">\(+\)</span> matrix addition</li>
<li><span class="math inline">\(*\)</span> multiplication by a
scalar</li>
<li><span class="math inline">\(%*%\)</span> matrix multiplication</li>
<li>t( ) transpose</li>
<li>solve( ) inverse</li>
<li>diag( ) get the diagonal</li>
</ul>
</div>
<div id="data-frame" class="section level3">
<h3>Data Frame</h3>
<p>They are perhaps the most common object we will deal with in R. Most
databases are imported automatically as data frames. They have multiple
variables organized in columns, and each row represents one
observation.</p>
<p>Before importing one, let’s create one from scratch and see how it
looks like.</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>datafr <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">var1 =</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">&quot;a&quot;</span>, <span class="dv">3</span>), <span class="fu">rep</span>(<span class="st">&quot;b&quot;</span>, <span class="dv">4</span>), <span class="fu">rep</span>(<span class="st">&quot;c&quot;</span>, <span class="dv">2</span>), <span class="st">&quot;d&quot;</span>),</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">var2 =</span> <span class="fu">rnorm</span>(<span class="at">n =</span> <span class="dv">10</span>, <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="fl">1.3</span>), <span class="co"># here we are drawing 10 random values from a </span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># normal distribution with mean = 0 and sd = 1.3</span></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">var3 =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="sc">-</span><span class="dv">4</span>, <span class="dv">2</span>, <span class="fl">4.2</span>, <span class="fl">5.3333</span>, <span class="dv">1</span><span class="sc">/</span><span class="dv">9</span>, <span class="fl">7.5</span>, <span class="fl">0.000</span>, <span class="dv">1-12</span>, <span class="fu">sqrt</span>(<span class="dv">2</span>)) <span class="co"># notice that here we are</span></span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># creating a vector where the elements are expressions! We also include the squared root of 2</span></span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb56-8"><a href="#cb56-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-9"><a href="#cb56-9" aria-hidden="true" tabindex="-1"></a>datafr</span></code></pre></div>
<pre><code>##    var1        var2        var3
## 1     a -1.01232121   1.0000000
## 2     a -0.04761299  -4.0000000
## 3     a  1.20558205   2.0000000
## 4     b  1.26396546   4.2000000
## 5     b -0.65507976   5.3333000
## 6     b  0.52927069   0.1111111
## 7     b -0.61224097   7.5000000
## 8     c  0.94587598   0.0000000
## 9     c  1.66394135 -11.0000000
## 10    d -0.79557489   1.4142136</code></pre>
<p>Each variable within our data frame is a vector, and the rules of
vectors apply to them. All variables in a data frame must have the same
length. But we might have variables with missing values. In R these
missing values are called NA:</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">var1 =</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">&quot;a&quot;</span>, <span class="dv">3</span>), <span class="fu">rep</span>(<span class="st">&quot;b&quot;</span>, <span class="dv">4</span>), <span class="fu">rep</span>(<span class="st">&quot;c&quot;</span>, <span class="dv">2</span>), <span class="st">&quot;d&quot;</span>),</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">var2 =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="cn">NA</span>,<span class="dv">7</span>,<span class="dv">8</span>,<span class="dv">9</span>,<span class="dv">10</span>))</span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>df <span class="co"># we have a missing value in var2</span></span></code></pre></div>
<pre><code>##    var1 var2
## 1     a    1
## 2     a    2
## 3     a    3
## 4     b    4
## 5     b    5
## 6     b   NA
## 7     b    7
## 8     c    8
## 9     c    9
## 10    d   10</code></pre>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(datafr)</span></code></pre></div>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<p>We can assess information in one column of our data frame using
<strong>$</strong> operator:</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>datafr<span class="sc">$</span>var1 <span class="co"># this gives us precisely the object we want.</span></span></code></pre></div>
<pre><code>##  [1] &quot;a&quot; &quot;a&quot; &quot;a&quot; &quot;b&quot; &quot;b&quot; &quot;b&quot; &quot;b&quot; &quot;c&quot; &quot;c&quot; &quot;d&quot;</code></pre>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>datafr<span class="sc">$</span>var3</span></code></pre></div>
<pre><code>##  [1]   1.0000000  -4.0000000   2.0000000   4.2000000   5.3333000   0.1111111
##  [7]   7.5000000   0.0000000 -11.0000000   1.4142136</code></pre>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>datafr<span class="sc">$</span>var2</span></code></pre></div>
<pre><code>##  [1] -1.01232121 -0.04761299  1.20558205  1.26396546 -0.65507976  0.52927069
##  [7] -0.61224097  0.94587598  1.66394135 -0.79557489</code></pre>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>var2</span></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5 NA  7  8  9 10</code></pre>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(datafr)</span></code></pre></div>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(datafr<span class="sc">$</span>var1)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(datafr<span class="sc">$</span>var2)</span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(datafr<span class="sc">$</span>var3)</span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
</div>
<div id="list" class="section level3">
<h3>List</h3>
<p>Lists are the last object type that we briefly introduce today. Lists
are objects that include different other objects in R, of whatever type.
A list can even contain another list.</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>ls <span class="ot">&lt;-</span> <span class="fu">list</span>(df, datafr, datafr<span class="sc">$</span>var2)</span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>ls</span></code></pre></div>
<pre><code>## [[1]]
##    var1 var2
## 1     a    1
## 2     a    2
## 3     a    3
## 4     b    4
## 5     b    5
## 6     b   NA
## 7     b    7
## 8     c    8
## 9     c    9
## 10    d   10
## 
## [[2]]
##    var1        var2        var3
## 1     a -1.01232121   1.0000000
## 2     a -0.04761299  -4.0000000
## 3     a  1.20558205   2.0000000
## 4     b  1.26396546   4.2000000
## 5     b -0.65507976   5.3333000
## 6     b  0.52927069   0.1111111
## 7     b -0.61224097   7.5000000
## 8     c  0.94587598   0.0000000
## 9     c  1.66394135 -11.0000000
## 10    d -0.79557489   1.4142136
## 
## [[3]]
##  [1] -1.01232121 -0.04761299  1.20558205  1.26396546 -0.65507976  0.52927069
##  [7] -0.61224097  0.94587598  1.66394135 -0.79557489</code></pre>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>ls2 <span class="ot">&lt;-</span> <span class="fu">list</span>(df, ls)</span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>ls2</span></code></pre></div>
<pre><code>## [[1]]
##    var1 var2
## 1     a    1
## 2     a    2
## 3     a    3
## 4     b    4
## 5     b    5
## 6     b   NA
## 7     b    7
## 8     c    8
## 9     c    9
## 10    d   10
## 
## [[2]]
## [[2]][[1]]
##    var1 var2
## 1     a    1
## 2     a    2
## 3     a    3
## 4     b    4
## 5     b    5
## 6     b   NA
## 7     b    7
## 8     c    8
## 9     c    9
## 10    d   10
## 
## [[2]][[2]]
##    var1        var2        var3
## 1     a -1.01232121   1.0000000
## 2     a -0.04761299  -4.0000000
## 3     a  1.20558205   2.0000000
## 4     b  1.26396546   4.2000000
## 5     b -0.65507976   5.3333000
## 6     b  0.52927069   0.1111111
## 7     b -0.61224097   7.5000000
## 8     c  0.94587598   0.0000000
## 9     c  1.66394135 -11.0000000
## 10    d -0.79557489   1.4142136
## 
## [[2]][[3]]
##  [1] -1.01232121 -0.04761299  1.20558205  1.26396546 -0.65507976  0.52927069
##  [7] -0.61224097  0.94587598  1.66394135 -0.79557489</code></pre>
<p>There are many functions that allow you to try to coerce the nature
of an object:<br />
- as.numeric() tries to coerce its argument into a numeric.<br />
- as.integer() tries to coerce its argument into an integer.<br />
- as.character() tries to coerce its argument into a character.<br />
- as.factor() tries to coerce its argument into a factor.<br />
</p>
<p>And also its class! - as.matrix() - as.data.frame() - as.array() -
as.list()</p>
</div>
</div>
</div>
<div id="import-and-manage-datasets" class="section level1">
<h1>Import and Manage Datasets</h1>
<div id="import-datasets" class="section level2">
<h2>Import Datasets</h2>
<p>Now, we will learn how to import different types of databases from
outside. First, let’s clean our enviornment before dealing with
databases.</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span></code></pre></div>
<p>Or by clicking on session -&gt; clear workspace -&gt; yes.</p>
<p>If you do it by code, make sure to keep that line <strong>at the
top</strong> of your script. It’s really important that you start fresh
each time you do work in R, to make sure that your workflow (the order
you do things) is replicable. In other words, it helps make sure that
your future self or someone else can open up your script,run everything,
and get the same result every time.<br />
</p>
<p>Then, we must set up our working directory, the folder on our
computer where we are going to work from, where we store our data and
where perhaps we might want to save our plots or the outputs from the
analysis.<br />
</p>
<p>In R, we do it using the setwd() function:</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">&quot;~/Desktop/ESS_3x_website&quot;</span>)</span></code></pre></div>
<p>Now import data from a csv file and save it in a named object.</p>
<p>The choice across various functions of importing data depends on the
data type, e.g. <strong>.dta</strong>, <strong>.csv</strong>, or
<strong>.xlsx</strong>.</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>ANES <span class="ot">&lt;-</span> <span class="fu">read_dta</span>(<span class="st">&quot;anesByState.dta&quot;</span>)</span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(ANES)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 8
##    year     state   FTM white   poor turnout voteDem   dem
##   &lt;dbl&gt; &lt;dbl+lbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;
## 1  1984    4 [NH]  73.6 1     0.118     1.81   0.231 0.205
## 2  1986    4 [NH]  76.7 0.944 0.154     1.44   0     0.333
## 3  1988    4 [NH]  66.3 0.935 0.0667    1.76   0.161 0.194
## 4  1990    4 [NH]  72.6 0.959 0.0476    1.49   0     0.184
## 5  1992    4 [NH]  50.6 0.914 0.0909    1.83   0.278 0.25 
## 6  1994    4 [NH]  52.7 1     0.286     1.60   0     0.133</code></pre>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>csvfile <span class="ot">&lt;-</span> <span class="st">&quot;https://raw.githubusercontent.com/lorenzo-crippa/Intro_to_R/master/2021/baseball.csv&quot;</span></span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a>baseball <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(csvfile)</span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(baseball)</span></code></pre></div>
<pre><code>##   X            name team heightinches weightpounds
## 1 1   Adam_Donachie  BAL           74          180
## 2 2       Paul_Bako  BAL           74          215
## 3 3 Ramon_Hernandez  BAL           72          210
## 4 4    Kevin_Millar  BAL           72          210
## 5 5     Chris_Gomez  BAL           73          188
## 6 6   Brian_Roberts  BAL           69          176</code></pre>
<p>Yes! We could import a data file from a URL:</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">&quot;http://www.principlesofeconometrics.com/stata/broiler.dta&quot;</span></span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>data.df <span class="ot">&lt;-</span> <span class="fu">read_dta</span>(url)</span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(data.df)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 12
##    year     q     y pchick pbeef  pcor    pf   cpi  qproda   pop meatex  time
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;
## 1  1950  14.3  7863   69.5  31.2  59.8    NA  24.1 2628500  152.     NA    41
## 2  1951  15.1  7953   72.9  36.5  72.1    NA  26   2843000  154.     NA    42
## 3  1952  15.3  8071   73.1  36.2  71.3    NA  26.5 2851200  157.     NA    43
## 4  1953  15.2  8319   71.3  28.5  62.7    NA  26.7 2953900  160.     NA    44
## 5  1954  15.8  8276   64.4  27.4  63.4    NA  26.9 3099700  162.     NA    45
## 6  1955  14.7  8675   67    27.1  56.1    NA  26.8 2958100  165.     NA    46</code></pre>
<p>In addition, although we won’t get into the details of this method,
some packages allow users to search and download data,
e.g. <strong>WDI</strong>, <strong>V-Dem, democracyData</strong>. Here
is an example of importing World Bank Data automatically.</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a>wdi_data <span class="ot">&lt;-</span> <span class="fu">WDI</span>(<span class="at">country =</span> <span class="st">&quot;all&quot;</span>, </span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a>               <span class="at">indicator =</span> <span class="fu">c</span>(<span class="at">population =</span> <span class="st">&quot;SP.POP.TOTL&quot;</span>,</span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a>                             <span class="at">gdp_percapita =</span> <span class="st">&quot;NY.GDP.PCAP.KD&quot;</span>), </span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">start =</span> <span class="dv">2000</span>, <span class="at">end =</span> <span class="dv">2020</span>, <span class="at">extra =</span> <span class="cn">TRUE</span>)</span>
<span id="cb90-5"><a href="#cb90-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(wdi_data)</span></code></pre></div>
<pre><code>##   iso2c    country year population gdp_percapita iso3c     region capital
## 1    1A Arab World 2005  314965776      5532.099   ARB Aggregates        
## 2    1A Arab World 2004  307862846      5363.638   ARB Aggregates        
## 3    1A Arab World 2017  411942825      6386.722   ARB Aggregates        
## 4    1A Arab World 2016  404042892      6431.676   ARB Aggregates        
## 5    1A Arab World 2008  338395936      6029.585   ARB Aggregates        
## 6    1A Arab World 2006  322452764      5732.229   ARB Aggregates        
##   longitude latitude     income    lending
## 1                    Aggregates Aggregates
## 2                    Aggregates Aggregates
## 3                    Aggregates Aggregates
## 4                    Aggregates Aggregates
## 5                    Aggregates Aggregates
## 6                    Aggregates Aggregates</code></pre>
<p>Here is the common data types, and the corresponding functions and
packages.</p>
<table>
<thead>
<tr class="header">
<th>Data Type</th>
<th>Function</th>
<th>Package</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>.dta</strong></td>
<td>read_dta</td>
<td>haven</td>
</tr>
<tr class="even">
<td></td>
<td>read.dta</td>
<td>foreign</td>
</tr>
<tr class="odd">
<td><strong>.csv</strong></td>
<td>read_csv</td>
<td>readr</td>
</tr>
<tr class="even">
<td></td>
<td>read.csv</td>
<td></td>
</tr>
<tr class="odd">
<td><strong>.xls</strong></td>
<td>read_excel</td>
<td>readxl</td>
</tr>
<tr class="even">
<td><strong>.xlsx</strong></td>
<td>read_excek</td>
<td>readxl</td>
</tr>
<tr class="odd">
<td><strong>.txt</strong></td>
<td>read.delim</td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div id="manage-datasets" class="section level2">
<h2>Manage datasets</h2>
<p>Database management like dropping observations and variables,sorting
the data and the other, can be done using the basic R language.</p>
<p>However, a suite of packages has also been developed to write code in
R in much more natural syntax. The suite is called tidyverse. We can
install it by running:</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages(&quot;tidyverse&quot;)</span></span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<pre><code>## ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.1 ──</code></pre>
<pre><code>## ✓ tibble  3.1.2     ✓ purrr   0.3.4
## ✓ tidyr   1.1.3     ✓ forcats 0.5.1</code></pre>
<pre><code>## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
## x psych::%+%()             masks ggplot2::%+%()
## x psych::alpha()           masks ggplot2::alpha()
## x tidyr::extract()         masks texreg::extract()
## x dplyr::filter()          masks stats::filter()
## x kableExtra::group_rows() masks dplyr::group_rows()
## x dplyr::lag()             masks stats::lag()</code></pre>
<p>In what follows, you’ll see code for managing datasets in base R,and
next you’ll see the (more intuitive) tidyverse version of the same
operations. It’s important to know both.</p>
<p>Suppose now we want to drop from our baseball data all observations
that refer to the CLE team (no offense to its fans). Doing it in base R
would be:</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>baseball.no.CLE <span class="ot">&lt;-</span> baseball[baseball<span class="sc">$</span>team <span class="sc">!=</span> <span class="st">&quot;CLE&quot;</span>, ]</span></code></pre></div>
<p>Suppose now we want to get rid of all observations that are not for
New York Yankees (NYY) and also we want to drop the column “name”. Yet,
we don’t want to overwrite the “baseball” object because we might need
the information we’re dropping later. We can do the following:</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a>baseball<span class="fl">.2</span> <span class="ot">&lt;-</span> baseball[baseball<span class="sc">$</span>team <span class="sc">==</span> <span class="st">&quot;NYY&quot;</span>, <span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>]</span></code></pre></div>
<p>These operations are made smoother by tidverse Let’s do something
similar on ANES. Let’s remove all observations from the year 2000, then
remove the variable turnout:</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a>ANES <span class="ot">&lt;-</span> <span class="fu">filter</span>(ANES, <span class="co"># what is your data frame? </span></span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a>               year <span class="sc">!=</span> <span class="dv">2000</span>) <span class="co"># the condition you impose</span></span>
<span id="cb98-3"><a href="#cb98-3" aria-hidden="true" tabindex="-1"></a>ANES <span class="ot">&lt;-</span> <span class="fu">select</span>(ANES, </span>
<span id="cb98-4"><a href="#cb98-4" aria-hidden="true" tabindex="-1"></a>               <span class="sc">-</span>turnout) <span class="co"># keep everything BUT the variable named &quot;turnout&quot;</span></span></code></pre></div>
<p>Now suppose we want to sort observations in our ANES dataset based on
state, then year.We can do it by:</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>ANES[<span class="fu">order</span>(ANES[,<span class="dv">2</span>], ANES[,<span class="dv">1</span>]),]</span></code></pre></div>
<pre><code>## # A tibble: 249 x 7
##     year     state   FTM white   poor voteDem    dem
##    &lt;dbl&gt; &lt;dbl+lbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;
##  1  1984    4 [NH]  73.6 1     0.118    0.231 0.205 
##  2  1986    4 [NH]  76.7 0.944 0.154    0     0.333 
##  3  1988    4 [NH]  66.3 0.935 0.0667   0.161 0.194 
##  4  1990    4 [NH]  72.6 0.959 0.0476   0     0.184 
##  5  1992    4 [NH]  50.6 0.914 0.0909   0.278 0.25  
##  6  1994    4 [NH]  52.7 1     0.286    0     0.133 
##  7  1996    4 [NH]  56.9 1     0.176    0.278 0.167 
##  8  1998    4 [NH]  41.8 1     0.0833   0     0.25  
##  9  2002    4 [NH]  72.6 0.923 0        0     0.0769
## 10  2004    4 [NH]  51.6 0.917 0.167    0.308 0.308 
## # … with 239 more rows</code></pre>
<p>By doing this we have taken ANES and we have asked R to reorder its
rows first based on the second column (state), then by its first column
(year). Notice that this time we have not saved the data frame obtained
into an object!</p>
<p>Another useful function is unique(). It tells us what values a vector
takes:</p>
<div class="sourceCode" id="cb101"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(ANES<span class="sc">$</span>year) <span class="co"># all possible years in the ANES dataset</span></span></code></pre></div>
<pre><code>##  [1] 1984 1986 1988 1990 1992 1994 1996 1998 2002 2004 1952 1956 1958 1960 1962
## [16] 1964 1966 1968 1970 1972 1974 1976 1978 1980 1982 2008</code></pre>
<div class="sourceCode" id="cb103"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="co"># we might want to have it sorted:</span></span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(<span class="fu">unique</span>(ANES<span class="sc">$</span>year)) <span class="co"># years from 1952 to 2008 by 2-year distance. </span></span></code></pre></div>
<pre><code>##  [1] 1952 1956 1958 1960 1962 1964 1966 1968 1970 1972 1974 1976 1978 1980 1982
## [16] 1984 1986 1988 1990 1992 1994 1996 1998 2002 2004 2008</code></pre>
<p>We can also add variables to our data frames. What if we wanted to
add the squared valueof “poor” in the ANES data frame? In base R this is
done by doing:</p>
<div class="sourceCode" id="cb105"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a>ANES<span class="sc">$</span>new.var <span class="ot">&lt;-</span> ANES<span class="sc">$</span>poor<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-3"><a href="#cb105-3" aria-hidden="true" tabindex="-1"></a><span class="co"># we can also do it in tidyverse by doing:</span></span>
<span id="cb105-4"><a href="#cb105-4" aria-hidden="true" tabindex="-1"></a>ANES <span class="ot">&lt;-</span> <span class="fu">mutate</span>(ANES,</span>
<span id="cb105-5"><a href="#cb105-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">new.var2 =</span> poor<span class="sc">*</span><span class="dv">2</span>)</span></code></pre></div>
<p>ifelse() is a function that is very useful to know. If its “test”
argument (a condition) is verified, it does what the “yes” argument
says. Otherwise, it executes the “no” argument. For instance, in ANES we
might want to have a variable that takes value 0, if the year is before
2000, and 1 otherwise. We can do it like this:</p>
<div class="sourceCode" id="cb106"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a>ANES<span class="sc">$</span>indicator <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(<span class="at">test =</span> ANES<span class="sc">$</span>year <span class="sc">&gt;=</span> <span class="dv">2000</span>, <span class="at">yes =</span> <span class="dv">1</span>, <span class="at">no =</span> <span class="dv">0</span>)</span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(ANES<span class="sc">$</span>indicator)</span></code></pre></div>
<pre><code>## [1] 0 1</code></pre>
</div>
</div>
<div id="get-summary-stats-and-plots" class="section level1">
<h1>Get Summary Stats and Plots</h1>
<div id="summary-statistics" class="section level2">
<h2>Summary Statistics</h2>
<p>When we first obtain a data object in R, there are several things
that we could do:</p>
<div class="sourceCode" id="cb108"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(ANES)   <span class="co"># obtain all the variable names of a dataset</span></span></code></pre></div>
<pre><code>##  [1] &quot;year&quot;      &quot;state&quot;     &quot;FTM&quot;       &quot;white&quot;     &quot;poor&quot;      &quot;voteDem&quot;  
##  [7] &quot;dem&quot;       &quot;new.var&quot;   &quot;new.var2&quot;  &quot;indicator&quot;</code></pre>
<div class="sourceCode" id="cb110"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(ANES)    </span></code></pre></div>
<pre><code>## # A tibble: 6 x 10
##    year     state   FTM white   poor voteDem   dem new.var new.var2 indicator
##   &lt;dbl&gt; &lt;dbl+lbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
## 1  1984    4 [NH]  73.6 1     0.118    0.231 0.205 0.0138    0.235          0
## 2  1986    4 [NH]  76.7 0.944 0.154    0     0.333 0.0237    0.308          0
## 3  1988    4 [NH]  66.3 0.935 0.0667   0.161 0.194 0.00444   0.133          0
## 4  1990    4 [NH]  72.6 0.959 0.0476   0     0.184 0.00227   0.0952         0
## 5  1992    4 [NH]  50.6 0.914 0.0909   0.278 0.25  0.00826   0.182          0
## 6  1994    4 [NH]  52.7 1     0.286    0     0.133 0.0816    0.571          0</code></pre>
<div class="sourceCode" id="cb112"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(ANES) <span class="co"># get a glimpse of your data.</span></span></code></pre></div>
<pre><code>## Rows: 249
## Columns: 10
## $ year      &lt;dbl&gt; 1984, 1986, 1988, 1990, 1992, 1994, 1996, 1998, 2002, 2004, …
## $ state     &lt;dbl+lbl&gt;  4,  4,  4,  4,  4,  4,  4,  4,  4,  4, 13, 13, 13, 13, …
## $ FTM       &lt;dbl&gt; 73.61539, 76.73333, 66.31035, 72.63265, 50.61111, 52.66667, …
## $ white     &lt;dbl&gt; 1.0000000, 0.9444444, 0.9354839, 0.9591837, 0.9142857, 1.000…
## $ poor      &lt;dbl&gt; 0.11764706, 0.15384616, 0.06666667, 0.04761905, 0.09090909, …
## $ voteDem   &lt;dbl&gt; 0.2307692, 0.0000000, 0.1612903, 0.0000000, 0.2777778, 0.000…
## $ dem       &lt;dbl&gt; 0.20512821, 0.33333334, 0.19354838, 0.18367347, 0.25000000, …
## $ new.var   &lt;dbl&gt; 0.013840831, 0.023668641, 0.004444445, 0.002267574, 0.008264…
## $ new.var2  &lt;dbl&gt; 0.2352941, 0.3076923, 0.1333333, 0.0952381, 0.1818182, 0.571…
## $ indicator &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …</code></pre>
<p>If we want to get some description of our data.</p>
<div class="sourceCode" id="cb114"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(ANES<span class="sc">$</span>poor)</span></code></pre></div>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##  0.0000  0.1093  0.1667  0.1825  0.2297  0.6923</code></pre>
<p>We can also ask for specific information:</p>
<div class="sourceCode" id="cb116"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(ANES<span class="sc">$</span>voteDem) </span></code></pre></div>
<pre><code>## [1] 0.1580367</code></pre>
<div class="sourceCode" id="cb118"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sd</span>(ANES<span class="sc">$</span>poor)</span></code></pre></div>
<pre><code>## [1] 0.1167872</code></pre>
<div class="sourceCode" id="cb120"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="fu">median</span>(ANES<span class="sc">$</span>dem)</span></code></pre></div>
<pre><code>## [1] 0.3415638</code></pre>
<div class="sourceCode" id="cb122"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="fu">min</span>(ANES<span class="sc">$</span>year)</span></code></pre></div>
<pre><code>## [1] 1952</code></pre>
<div class="sourceCode" id="cb124"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a><span class="fu">max</span>(ANES<span class="sc">$</span>voteDem)</span></code></pre></div>
<pre><code>## [1] 0.6666667</code></pre>
<div class="sourceCode" id="cb126"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="fu">quantile</span>(ANES<span class="sc">$</span>poor, <span class="fl">0.3</span>) <span class="co"># the observation that leaves 30% of the observations to its left</span></span></code></pre></div>
<pre><code>##       30% 
## 0.1275826</code></pre>
<div class="sourceCode" id="cb128"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="fu">quantile</span>(ANES<span class="sc">$</span>poor, <span class="fl">0.5</span>) <span class="co"># this will be the median of course!</span></span></code></pre></div>
<pre><code>##       50% 
## 0.1666667</code></pre>
<div class="sourceCode" id="cb130"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a><span class="fu">median</span>(ANES<span class="sc">$</span>poor)</span></code></pre></div>
<pre><code>## [1] 0.1666667</code></pre>
<div class="sourceCode" id="cb132"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="fu">var</span>(ANES<span class="sc">$</span>dem) <span class="co"># the variance</span></span></code></pre></div>
<pre><code>## [1] 0.03924865</code></pre>
<div class="sourceCode" id="cb134"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(ANES<span class="sc">$</span>year) <span class="co"># how often does each occurrence appear?</span></span></code></pre></div>
<pre><code>## 
## 1952 1956 1958 1960 1962 1964 1966 1968 1970 1972 1974 1976 1978 1980 1982 1984 
##    9    8    8    8    9    9    9    9    9   10   10   10   10   10   10   10 
## 1986 1988 1990 1992 1994 1996 1998 2002 2004 2008 
##   10   10   10   10   10   11    9   12    9   10</code></pre>
<div class="sourceCode" id="cb136"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="fu">range</span>(ANES<span class="sc">$</span>year)</span></code></pre></div>
<pre><code>## [1] 1952 2008</code></pre>
</div>
<div id="basic-plots" class="section level2">
<h2>Basic plots</h2>
<p>We now want to obtain some plots about our data. We will see how
to:</p>
<ol style="list-style-type: decimal">
<li><p>obtain boxplots</p></li>
<li><p>obtain histograms</p></li>
<li><p>obtain density plots</p></li>
<li><p>obtain twoway plots</p></li>
</ol>
<div id="boxplots" class="section level3">
<h3>Boxplots</h3>
<p>To create a boxplot:</p>
<div class="sourceCode" id="cb138"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="fu">boxplot</span>(ANES<span class="sc">$</span>white)</span></code></pre></div>
<p><img src="Learning_files/figure-html/unnamed-chunk-47-1.png" width="576" /></p>
<div class="sourceCode" id="cb139"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="co"># we can then intervene on options and modify its appearance:</span></span>
<span id="cb139-2"><a href="#cb139-2" aria-hidden="true" tabindex="-1"></a><span class="fu">boxplot</span>(ANES<span class="sc">$</span>white, <span class="at">frame =</span> F, <span class="at">ylab =</span> <span class="st">&quot;white&quot;</span>, <span class="at">main =</span> <span class="st">&quot;A boxplot&quot;</span>)</span></code></pre></div>
<p><img src="Learning_files/figure-html/unnamed-chunk-47-2.png" width="576" /></p>
<div class="sourceCode" id="cb140"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a>?boxplot</span></code></pre></div>
<p>We could also:</p>
<div class="sourceCode" id="cb141"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a><span class="co"># this would be the tidyverse way of doing it:</span></span>
<span id="cb141-2"><a href="#cb141-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(ANES, <span class="fu">aes</span>(<span class="at">y =</span> white)) <span class="sc">+</span></span>
<span id="cb141-3"><a href="#cb141-3" aria-hidden="true" tabindex="-1"></a>         <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb141-4"><a href="#cb141-4" aria-hidden="true" tabindex="-1"></a>         <span class="fu">theme_minimal</span>()</span></code></pre></div>
<p><img src="Learning_files/figure-html/unnamed-chunk-48-1.png" width="576" /></p>
</div>
<div id="histograms" class="section level3">
<h3>Histograms</h3>
<p>Plotting a histogram is also easy and similar to create a
boxplot:</p>
<div class="sourceCode" id="cb142"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="#cb142-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(ANES<span class="sc">$</span>FTM, <span class="at">main =</span> <span class="st">&quot;Histogram of FTM&quot;</span>, <span class="at">xlab =</span> <span class="st">&quot;FTM&quot;</span>)</span></code></pre></div>
<p><img src="Learning_files/figure-html/unnamed-chunk-49-1.png" width="576" /></p>
<div class="sourceCode" id="cb143"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a><span class="co"># and we can also intervene in the plot with options:</span></span>
<span id="cb143-2"><a href="#cb143-2" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(ANES<span class="sc">$</span>FTM, <span class="at">main =</span> <span class="st">&quot;Histogram of FTM&quot;</span>, <span class="at">xlab =</span> <span class="st">&quot;FTM&quot;</span>, <span class="at">probability =</span> <span class="cn">TRUE</span>) <span class="co"># to have probabilities</span></span></code></pre></div>
<p><img src="Learning_files/figure-html/unnamed-chunk-49-2.png" width="576" /></p>
<p>Again, in tidyverse:</p>
<div class="sourceCode" id="cb144"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="#cb144-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(ANES, <span class="fu">aes</span>(<span class="at">x =</span> FTM)) <span class="sc">+</span></span>
<span id="cb144-2"><a href="#cb144-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb144-3"><a href="#cb144-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code></pre></div>
<pre><code>## Warning: Removed 60 rows containing non-finite values (stat_bin).</code></pre>
<p><img src="Learning_files/figure-html/unnamed-chunk-50-1.png" width="576" /></p>
</div>
<div id="density-plots" class="section level3">
<h3>Density Plots</h3>
<p>We can also obtain kernel densities of our data:</p>
<div class="sourceCode" id="cb146"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="#cb146-1" aria-hidden="true" tabindex="-1"></a><span class="fu">density</span>(ANES<span class="sc">$</span>dem)</span></code></pre></div>
<pre><code>## 
## Call:
##  density.default(x = ANES$dem)
## 
## Data: ANES$dem (249 obs.);   Bandwidth &#39;bw&#39; = 0.05914
## 
##        x                  y            
##  Min.   :-0.17743   Min.   :0.0003078  
##  1st Qu.: 0.09549   1st Qu.:0.1572875  
##  Median : 0.36842   Median :0.6873645  
##  Mean   : 0.36842   Mean   :0.9147635  
##  3rd Qu.: 0.64135   3rd Qu.:1.5971476  
##  Max.   : 0.91428   Max.   :2.5217948</code></pre>
<div class="sourceCode" id="cb148"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="#cb148-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">density</span>(ANES<span class="sc">$</span>dem))</span></code></pre></div>
<p><img src="Learning_files/figure-html/unnamed-chunk-51-1.png" width="576" /></p>
</div>
<div id="twoway-plots" class="section level3">
<h3>Twoway Plots</h3>
<p>Suppose now we want to explore two-way relations in our data. For
instance the two-way relation between height and weight of baseball
players:</p>
<div class="sourceCode" id="cb149"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="at">x =</span> baseball<span class="sc">$</span>heightinches, <span class="at">y =</span> baseball<span class="sc">$</span>weightpounds,</span>
<span id="cb149-2"><a href="#cb149-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">frame.plot =</span> <span class="cn">FALSE</span>, <span class="at">xlab =</span> <span class="st">&quot;height&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;weight&quot;</span>,</span>
<span id="cb149-3"><a href="#cb149-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">pch =</span> <span class="dv">20</span>) <span class="co"># pch is an option that selects the shape of dots we want </span></span>
<span id="cb149-4"><a href="#cb149-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb149-5"><a href="#cb149-5" aria-hidden="true" tabindex="-1"></a><span class="co"># what if we want to add lines on this plot? We use the abline() function</span></span>
<span id="cb149-6"><a href="#cb149-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Maybe we want to plot a line corresponding to the mean height </span></span>
<span id="cb149-7"><a href="#cb149-7" aria-hidden="true" tabindex="-1"></a><span class="co"># lwd makes it thicker</span></span>
<span id="cb149-8"><a href="#cb149-8" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">v =</span> <span class="fu">mean</span>(baseball<span class="sc">$</span>heightinches, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">col =</span> <span class="st">&quot;red&quot;</span>, <span class="at">lwd =</span> <span class="dv">5</span>) </span></code></pre></div>
<p><img src="Learning_files/figure-html/unnamed-chunk-52-1.png" width="576" /></p>
<p>Again, tidyverse makes things much easier. Let’s re-do all the steps
we did before. First, we created a scatter plot. This time, let’s save
the plot in an object:</p>
<div class="sourceCode" id="cb150"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="#cb150-1" aria-hidden="true" tabindex="-1"></a>my.plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(baseball, <span class="fu">aes</span>(<span class="at">x =</span> heightinches, <span class="at">y =</span> weightpounds)) <span class="sc">+</span></span>
<span id="cb150-2"><a href="#cb150-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb150-3"><a href="#cb150-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb150-4"><a href="#cb150-4" aria-hidden="true" tabindex="-1"></a>my.plot</span></code></pre></div>
<p><img src="Learning_files/figure-html/unnamed-chunk-53-1.png" width="576" /></p>
<p>tidyverse makes it also simpler to save tidyverse plots:</p>
<div class="sourceCode" id="cb151"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(my.plot, <span class="at">filename =</span> <span class="st">&quot;my_first_ggplot.pdf&quot;</span>)</span></code></pre></div>
<pre><code>## Saving 6 x 6 in image</code></pre>
</div>
</div>
</div>
<div id="run-basic-statistical-analyses" class="section level1">
<h1>Run Basic Statistical Analyses</h1>
<div id="t-tests" class="section level2">
<h2>T-Tests</h2>
<p>Suppose we would like to run a test to see if the population mean of
a random variable is distinguishable from 0 based on the data:</p>
<div class="sourceCode" id="cb153"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="fu">t.test</span>(ANES<span class="sc">$</span>poor) <span class="co"># by defaul it&#39;s a two-tailed t-test with null-value = 0</span></span></code></pre></div>
<pre><code>## 
##  One Sample t-test
## 
## data:  ANES$poor
## t = 24.661, df = 248, p-value &lt; 2.2e-16
## alternative hypothesis: true mean is not equal to 0
## 95 percent confidence interval:
##  0.1679421 0.1970962
## sample estimates:
## mean of x 
## 0.1825192</code></pre>
<p>Or you can also test if the true value is equal to other values:</p>
<div class="sourceCode" id="cb155"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="fu">t.test</span>(ANES<span class="sc">$</span>FTM, <span class="at">mu =</span> <span class="dv">60</span>)</span></code></pre></div>
<pre><code>## 
##  One Sample t-test
## 
## data:  ANES$FTM
## t = -1.7905, df = 188, p-value = 0.07498
## alternative hypothesis: true mean is not equal to 60
## 95 percent confidence interval:
##  57.44561 60.12363
## sample estimates:
## mean of x 
##  58.78462</code></pre>
<div class="sourceCode" id="cb157"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ...and you can ask the test be one-sided:</span></span>
<span id="cb157-2"><a href="#cb157-2" aria-hidden="true" tabindex="-1"></a><span class="fu">t.test</span>(ANES<span class="sc">$</span>FTM, <span class="at">mu =</span> <span class="dv">60</span>, <span class="at">alternative =</span> <span class="st">&quot;less&quot;</span>)</span></code></pre></div>
<pre><code>## 
##  One Sample t-test
## 
## data:  ANES$FTM
## t = -1.7905, df = 188, p-value = 0.03749
## alternative hypothesis: true mean is less than 60
## 95 percent confidence interval:
##      -Inf 59.90665
## sample estimates:
## mean of x 
##  58.78462</code></pre>
<div class="sourceCode" id="cb159"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a><span class="fu">t.test</span>(ANES<span class="sc">$</span>FTM, <span class="at">mu =</span> <span class="dv">60</span>, <span class="at">alternative =</span> <span class="st">&quot;greater&quot;</span>)</span></code></pre></div>
<pre><code>## 
##  One Sample t-test
## 
## data:  ANES$FTM
## t = -1.7905, df = 188, p-value = 0.9625
## alternative hypothesis: true mean is greater than 60
## 95 percent confidence interval:
##  57.66259      Inf
## sample estimates:
## mean of x 
##  58.78462</code></pre>
<p>We could also run difference-in-means tests. Suppose you want to test
if the mean height of players in the NYY team is different from the mean
height of players in the MIN team:</p>
<div class="sourceCode" id="cb161"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a><span class="fu">t.test</span>(<span class="at">x =</span> baseball<span class="sc">$</span>heightinches[baseball<span class="sc">$</span>team <span class="sc">==</span> <span class="st">&quot;NYY&quot;</span>],</span>
<span id="cb161-2"><a href="#cb161-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> baseball<span class="sc">$</span>heightinches[baseball<span class="sc">$</span>team <span class="sc">==</span> <span class="st">&quot;MIN&quot;</span>])</span></code></pre></div>
<pre><code>## 
##  Welch Two Sample t-test
## 
## data:  baseball$heightinches[baseball$team == &quot;NYY&quot;] and baseball$heightinches[baseball$team == &quot;MIN&quot;]
## t = 2.3469, df = 63, p-value = 0.02209
## alternative hypothesis: true difference in means is not equal to 0
## 95 percent confidence interval:
##  0.1860759 2.3196059
## sample estimates:
## mean of x mean of y 
##  74.34375  73.09091</code></pre>
<p><strong>YES, THEY ARE</strong>. Players in the Yankees are taller on
average.</p>
</div>
<div id="statistical-models" class="section level2">
<h2>Statistical models</h2>
<div id="linear-models" class="section level3">
<h3>Linear Models</h3>
<p>Now, we want to estimate a linear model using OLS. To do that, we
first import a dataset from an article by David Card (1993) on NBER:</p>
<div class="sourceCode" id="cb163"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a>card <span class="ot">&lt;-</span> <span class="fu">read_dta</span>(<span class="st">&quot;Card_data.dta&quot;</span>)</span>
<span id="cb163-2"><a href="#cb163-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(card)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 17
##      id nearc2 nearc4  educ   age fatheduc motheduc weight black  smsa south
##   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1     2      0      0     7    29       NA       NA 158413     1     1     0
## 2     3      0      0    12    27        8        8 380166     0     1     0
## 3     4      0      0    12    34       14       12 367470     0     1     0
## 4     5      1      1    11    27       11       12 380166     0     1     0
## 5     6      1      1    12    34        8        7 367470     0     1     0
## 6     7      1      1    12    26        9       12 380166     0     1     0
## # … with 6 more variables: wage &lt;dbl&gt;, enroll &lt;dbl&gt;, IQ &lt;dbl&gt;, married &lt;dbl&gt;,
## #   exper &lt;dbl&gt;, expersq &lt;dbl&gt;</code></pre>
<p>Okay, let’s run a linear regression.</p>
<div class="sourceCode" id="cb165"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a>model1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(wage <span class="sc">~</span> exper, <span class="co"># your formula</span></span>
<span id="cb165-2"><a href="#cb165-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">data =</span> card) <span class="co"># where are the data stored</span></span>
<span id="cb165-3"><a href="#cb165-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model1)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = wage ~ exper, data = card)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -487.09 -183.28  -40.74  132.00 1830.26 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  560.394     11.312  49.538   &lt;2e-16 ***
## exper          1.907      1.157   1.648   0.0995 .  
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 262.9 on 3008 degrees of freedom
## Multiple R-squared:  0.0009021,  Adjusted R-squared:  0.0005699 
## F-statistic: 2.716 on 1 and 3008 DF,  p-value: 0.09945</code></pre>
<p>We probably would like to include some control variables in this
model specifications.</p>
<div class="sourceCode" id="cb167"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="#cb167-1" aria-hidden="true" tabindex="-1"></a>model2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(wage <span class="sc">~</span> exper <span class="sc">+</span> motheduc <span class="sc">+</span> fatheduc,</span>
<span id="cb167-2"><a href="#cb167-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">data =</span> card)</span>
<span id="cb167-3"><a href="#cb167-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model2)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = wage ~ exper + motheduc + fatheduc, data = card)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -606.64 -173.06  -34.19  121.98 1667.47 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  229.921     27.933   8.231 3.12e-16 ***
## exper         12.793      1.486   8.609  &lt; 2e-16 ***
## motheduc      12.300      2.308   5.330 1.08e-07 ***
## fatheduc      12.237      1.933   6.330 2.97e-10 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 255.1 on 2216 degrees of freedom
##   (790 observations deleted due to missingness)
## Multiple R-squared:  0.07555,    Adjusted R-squared:  0.0743 
## F-statistic: 60.37 on 3 and 2216 DF,  p-value: &lt; 2.2e-16</code></pre>
<p>From time to time, we need to transform some variables:</p>
<div class="sourceCode" id="cb169"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true" tabindex="-1"></a>model3 <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="fu">log</span>(wage) <span class="sc">~</span> exper <span class="sc">+</span> motheduc <span class="sc">+</span> fatheduc,</span>
<span id="cb169-2"><a href="#cb169-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">data =</span> card)</span>
<span id="cb169-3"><a href="#cb169-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model3)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = log(wage) ~ exper + motheduc + fatheduc, data = card)
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -1.71548 -0.26955  0.02687  0.27698  1.60767 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) 5.697035   0.046392 122.803  &lt; 2e-16 ***
## exper       0.019757   0.002468   8.005 1.91e-15 ***
## motheduc    0.022918   0.003833   5.979 2.60e-09 ***
## fatheduc    0.018002   0.003211   5.607 2.32e-08 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.4236 on 2216 degrees of freedom
##   (790 observations deleted due to missingness)
## Multiple R-squared:  0.07294,    Adjusted R-squared:  0.07168 
## F-statistic: 58.12 on 3 and 2216 DF,  p-value: &lt; 2.2e-16</code></pre>
<p>And we could use extract_eq() to obtain the equation of the model
output:</p>
<div class="sourceCode" id="cb171"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a><span class="fu">extract_eq</span>(model3,<span class="at">wrap =</span> <span class="cn">TRUE</span>, <span class="at">use_coefs =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><span class="math display">\[
\begin{aligned}
\operatorname{\widehat{log(wage)}} &amp;= 5.7 +
0.02(\operatorname{\exper}) + 0.02(\operatorname{motheduc}) +
0.02(\operatorname{fatheduc})
\end{aligned}
\]</span></p>
<p>There are some very good packages to produce neat regression tables
out there to present our results. The choice between them depends mostly
on the type of models that they can support. Two equally good choices
are <strong>stargazer</strong> and <strong>texreg</strong>.</p>
<p>We’ll use stargazer today:</p>
<div class="sourceCode" id="cb172"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="#cb172-1" aria-hidden="true" tabindex="-1"></a><span class="co"># let&#39;s see how stargazer works</span></span>
<span id="cb172-2"><a href="#cb172-2" aria-hidden="true" tabindex="-1"></a><span class="fu">stargazer</span>(model1, model2, model3, <span class="at">type =</span> <span class="st">&quot;text&quot;</span>,</span>
<span id="cb172-3"><a href="#cb172-3" aria-hidden="true" tabindex="-1"></a>          <span class="at">keep.stat =</span> <span class="fu">c</span>(<span class="st">&quot;n&quot;</span>, <span class="st">&quot;rsq&quot;</span>, <span class="st">&quot;adj.rsq&quot;</span>, <span class="st">&quot;f&quot;</span>), <span class="at">df =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>## 
## ============================================
##                    Dependent variable:      
##              -------------------------------
##                      wage          log(wage)
##                 (1)        (2)        (3)   
## --------------------------------------------
## exper          1.907*   12.793***  0.020*** 
##               (1.157)    (1.486)    (0.002) 
##                                             
## motheduc                12.300***  0.023*** 
##                          (2.308)    (0.004) 
##                                             
## fatheduc                12.237***  0.018*** 
##                          (1.933)    (0.003) 
##                                             
## Constant     560.394*** 229.921*** 5.697*** 
##               (11.312)   (27.933)   (0.046) 
##                                             
## --------------------------------------------
## Observations   3,010      2,220      2,220  
## R2             0.001      0.076      0.073  
## Adjusted R2    0.001      0.074      0.072  
## F Statistic    2.716*   60.366***  58.117***
## ============================================
## Note:            *p&lt;0.1; **p&lt;0.05; ***p&lt;0.01</code></pre>
<div class="sourceCode" id="cb174"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="#cb174-1" aria-hidden="true" tabindex="-1"></a>?stargazer</span></code></pre></div>
<div class="sourceCode" id="cb175"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb175-1"><a href="#cb175-1" aria-hidden="true" tabindex="-1"></a><span class="co"># we can also extract statistics and information from our model objects:</span></span>
<span id="cb175-2"><a href="#cb175-2" aria-hidden="true" tabindex="-1"></a>model3<span class="sc">$</span>coefficients</span></code></pre></div>
<pre><code>## (Intercept)       exper    motheduc    fatheduc 
##  5.69703504  0.01975653  0.02291837  0.01800203</code></pre>
<div class="sourceCode" id="cb177"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb177-1"><a href="#cb177-1" aria-hidden="true" tabindex="-1"></a><span class="co"># model3$residuals</span></span>
<span id="cb177-2"><a href="#cb177-2" aria-hidden="true" tabindex="-1"></a>fit <span class="ot">&lt;-</span> model3<span class="sc">$</span>fitted.values</span>
<span id="cb177-3"><a href="#cb177-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb177-4"><a href="#cb177-4" aria-hidden="true" tabindex="-1"></a><span class="co"># and more:</span></span>
<span id="cb177-5"><a href="#cb177-5" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model3)<span class="sc">$</span>coefficients[,<span class="dv">1</span>] <span class="co"># these are the coefficients (the betas)</span></span></code></pre></div>
<pre><code>## (Intercept)       exper    motheduc    fatheduc 
##  5.69703504  0.01975653  0.02291837  0.01800203</code></pre>
<div class="sourceCode" id="cb179"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="#cb179-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model3)<span class="sc">$</span>coefficients[,<span class="dv">2</span>] <span class="co"># these are the standard errors of our coefficients</span></span></code></pre></div>
<pre><code>## (Intercept)       exper    motheduc    fatheduc 
## 0.046391537 0.002467970 0.003832941 0.003210862</code></pre>
<div class="sourceCode" id="cb181"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="#cb181-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model3)<span class="sc">$</span>coefficients[,<span class="dv">3</span>] <span class="co"># these are the t-statistics</span></span></code></pre></div>
<pre><code>## (Intercept)       exper    motheduc    fatheduc 
##  122.803326    8.005173    5.979318    5.606604</code></pre>
<div class="sourceCode" id="cb183"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="#cb183-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model3)<span class="sc">$</span>coefficients[,<span class="dv">4</span>] <span class="co"># these are the p-values</span></span></code></pre></div>
<pre><code>##  (Intercept)        exper     motheduc     fatheduc 
## 0.000000e+00 1.906293e-15 2.604881e-09 2.320346e-08</code></pre>
<div class="sourceCode" id="cb185"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="#cb185-1" aria-hidden="true" tabindex="-1"></a><span class="co"># of course we could save this information in R objects</span></span></code></pre></div>
</div>
<div id="generalized-linear-models" class="section level3">
<h3>Generalized Linear Models</h3>
<p>Most statistical models in R have a syntax very similar to the one
adopted by lm().Covering these models is not part of today’s class, but
we might want to show that other models, such as those in the family of
the generalized linear model (GLM),work very similarly. Suppose we want
to explain if a person went to college based on the years of education
of the father and mother. A logit or probit model would be
appropriate:</p>
<div class="sourceCode" id="cb186"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb186-1"><a href="#cb186-1" aria-hidden="true" tabindex="-1"></a>mod.glm <span class="ot">&lt;-</span> <span class="fu">glm</span>(enroll <span class="sc">~</span> fatheduc <span class="sc">+</span> motheduc <span class="sc">+</span></span>
<span id="cb186-2"><a href="#cb186-2" aria-hidden="true" tabindex="-1"></a>                 black <span class="sc">+</span> smsa <span class="sc">+</span> south <span class="sc">+</span> IQ,</span>
<span id="cb186-3"><a href="#cb186-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">data =</span> card,</span>
<span id="cb186-4"><a href="#cb186-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">&quot;logit&quot;</span>))</span>
<span id="cb186-5"><a href="#cb186-5" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod.glm)</span></code></pre></div>
<pre><code>## 
## Call:
## glm(formula = enroll ~ fatheduc + motheduc + black + smsa + south + 
##     IQ, family = binomial(link = &quot;logit&quot;), data = card)
## 
## Deviance Residuals: 
##     Min       1Q   Median       3Q      Max  
## -0.7942  -0.5148  -0.4540  -0.3783   2.5100  
## 
## Coefficients:
##              Estimate Std. Error z value Pr(&gt;|z|)    
## (Intercept) -4.761790   0.685262  -6.949 3.68e-12 ***
## fatheduc     0.023338   0.030060   0.776   0.4375    
## motheduc     0.021301   0.036043   0.591   0.5545    
## black        0.423930   0.279064   1.519   0.1287    
## smsa         0.532584   0.216436   2.461   0.0139 *  
## south        0.349561   0.172519   2.026   0.0427 *  
## IQ           0.014955   0.006134   2.438   0.0148 *  
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## (Dispersion parameter for binomial family taken to be 1)
## 
##     Null deviance: 1109.0  on 1618  degrees of freedom
## Residual deviance: 1086.2  on 1612  degrees of freedom
##   (1391 observations deleted due to missingness)
## AIC: 1100.2
## 
## Number of Fisher Scoring iterations: 5</code></pre>
<div class="sourceCode" id="cb188"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb188-1"><a href="#cb188-1" aria-hidden="true" tabindex="-1"></a><span class="fu">screenreg</span>(mod.glm)</span></code></pre></div>
<pre><code>## 
## ===========================
##                 Model 1    
## ---------------------------
## (Intercept)       -4.76 ***
##                   (0.69)   
## fatheduc           0.02    
##                   (0.03)   
## motheduc           0.02    
##                   (0.04)   
## black              0.42    
##                   (0.28)   
## smsa               0.53 *  
##                   (0.22)   
## south              0.35 *  
##                   (0.17)   
## IQ                 0.01 *  
##                   (0.01)   
## ---------------------------
## AIC             1100.16    
## BIC             1137.88    
## Log Likelihood  -543.08    
## Deviance        1086.16    
## Num. obs.       1619       
## ===========================
## *** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
</div>
</div>
<div id="additional-sources" class="section level1">
<h1>Additional Sources</h1>
<div id="some-additional-packages" class="section level2">
<h2>Some additional packages</h2>
<table>
<colgroup>
<col width="26%" />
<col width="26%" />
<col width="47%" />
</colgroup>
<thead>
<tr class="header">
<th>Type</th>
<th>Package Name</th>
<th>Aim</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Data import</td>
<td>readr</td>
<td>Import files from various formats</td>
</tr>
<tr class="even">
<td></td>
<td>foreign</td>
<td></td>
</tr>
<tr class="odd">
<td>Data Cleaning</td>
<td>reshape</td>
<td>Turning long datasets into wide and vice versa</td>
</tr>
<tr class="even">
<td>Plots</td>
<td>ggplot2</td>
<td>Plots based on grammar of graphics</td>
</tr>
<tr class="odd">
<td></td>
<td>ggpubr</td>
<td>ggplot2-based publication-ready plots</td>
</tr>
<tr class="even">
<td>Standard errors</td>
<td>sandwich + lmtest</td>
<td>Robust and cluster + test coeffcients</td>
</tr>
<tr class="odd">
<td>Modelling</td>
<td>plm</td>
<td>Panel data models</td>
</tr>
<tr class="even">
<td></td>
<td>margins or ggeffects</td>
<td>Marginal effects from models</td>
</tr>
<tr class="odd">
<td></td>
<td>marginaleffects</td>
<td>Marginal effects from models</td>
</tr>
<tr class="even">
<td></td>
<td>AER</td>
<td>Various (Instrumental variable, tobit models)</td>
</tr>
<tr class="odd">
<td></td>
<td>mlogit or mnlogit</td>
<td>Multinominal logit models</td>
</tr>
<tr class="even">
<td></td>
<td>lme4</td>
<td>Multilevel models</td>
</tr>
<tr class="odd">
<td></td>
<td>rdd</td>
<td>Regression discontinuity design</td>
</tr>
<tr class="even">
<td></td>
<td>zoo or forecast</td>
<td>Time series tools</td>
</tr>
<tr class="odd">
<td>Latent Variable</td>
<td>psych</td>
<td>Exploratory Factor Analysis</td>
</tr>
<tr class="even">
<td></td>
<td>lavaan</td>
<td>CFA/SEM</td>
</tr>
<tr class="odd">
<td>Webscraping</td>
<td>rvest</td>
<td>Webscraping</td>
</tr>
<tr class="even">
<td></td>
<td>httr</td>
<td>Webscraping, APIs</td>
</tr>
<tr class="odd">
<td></td>
<td>RSelenium</td>
<td>Scraping dynamic websites</td>
</tr>
<tr class="even">
<td>Text Data</td>
<td>quanteda</td>
<td>Text data mining and wrangling</td>
</tr>
<tr class="odd">
<td>Twitter Data</td>
<td>rtweet</td>
<td>Mining Tweets</td>
</tr>
<tr class="even">
<td>Spatial Data</td>
<td>tmap</td>
<td>Drawing thematic maps</td>
</tr>
<tr class="odd">
<td></td>
<td>sf</td>
<td>Spatial Manipulaytion</td>
</tr>
<tr class="even">
<td>Color Palette</td>
<td>MetBrewer</td>
<td>Palettes inspired by works at the Metropolitan Museum of Art in New
York</td>
</tr>
</tbody>
</table>
</div>
<div id="user-written-functions" class="section level2">
<h2>User-written functions</h2>
<p>User-written <strong>functions</strong> allow you to create a
function which runs a series of commands, it can include and input and
output variable. You must also name the function yourself. Once the
function has been run, it is saved in your work environment by R and you
can run data through it by calling it as you would do with any other
function in R (I.e. myfunction(data)).</p>
<p>The general structure looks like:</p>
<div class="sourceCode" id="cb190"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="#cb190-1" aria-hidden="true" tabindex="-1"></a>myfunction <span class="ot">&lt;-</span> <span class="cf">function</span>(x){</span>
<span id="cb190-2"><a href="#cb190-2" aria-hidden="true" tabindex="-1"></a>  a <span class="ot">&lt;-</span> x<span class="sc">/</span><span class="dv">2</span></span>
<span id="cb190-3"><a href="#cb190-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(a)</span>
<span id="cb190-4"><a href="#cb190-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Let’s test the newly-created function:</p>
<div class="sourceCode" id="cb191"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb191-1"><a href="#cb191-1" aria-hidden="true" tabindex="-1"></a><span class="fu">myfunction</span>(<span class="dv">4</span>)</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
</div>
<div id="loop" class="section level2">
<h2>Loop</h2>
<p>A loop is a means to repeat code under defined conditions. This is a
great way for reducing the amount of code you may need to write. For
example, you could use the loop to iterate a series of commands through
a number of different positions (i.e. rows) in a data frame.</p>
<p>The most basic means of looping commands in R is known as the for
loop. To implement it, you run the <code>for()</code> function and
within the parameters, you define the sequence through which the loop
will input data. Usually, an argument is assigned (i) and given a range
of numerical positions (i.e. <code>in 2:5</code> which runs from
position 2 to position 5). You next enter the commands which the loop
will run within curly brackets following the parameters. The defined
argument (i) is used to determine the input data for each iteration.
This has been demonstrated in the example below which loops the code for
four columns of our data frame.</p>
</div>
<div id="ifelse-statements" class="section level2">
<h2>If/else statements</h2>
<p>There are various commands we can run within for loops to edit their
functionality. If-else statements allow us to change the outcome of the
loop depending on a particular statement. For instance, if a value is
below a certain threshold, you can tell the loop to round it up,
otherwise (else) do nothing.</p>
<p>Okay, let’s take a look at the WDI dataset again.</p>
<div class="sourceCode" id="cb193"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb193-1"><a href="#cb193-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(wdi_data)</span></code></pre></div>
<pre><code>## Rows: 5,586
## Columns: 12
## $ iso2c         &lt;chr&gt; &quot;1A&quot;, &quot;1A&quot;, &quot;1A&quot;, &quot;1A&quot;, &quot;1A&quot;, &quot;1A&quot;, &quot;1A&quot;, &quot;1A&quot;, &quot;1A&quot;, &quot;1…
## $ country       &lt;chr&gt; &quot;Arab World&quot;, &quot;Arab World&quot;, &quot;Arab World&quot;, &quot;Arab World&quot;, …
## $ year          &lt;int&gt; 2005, 2004, 2017, 2016, 2008, 2006, 2003, 2007, 2012, 20…
## $ population    &lt;dbl&gt; 314965776, 307862846, 411942825, 404042892, 338395936, 3…
## $ gdp_percapita &lt;dbl&gt; 5532.099, 5363.638, 6386.722, 6431.676, 6029.585, 5732.2…
## $ iso3c         &lt;chr&gt; &quot;ARB&quot;, &quot;ARB&quot;, &quot;ARB&quot;, &quot;ARB&quot;, &quot;ARB&quot;, &quot;ARB&quot;, &quot;ARB&quot;, &quot;ARB&quot;, …
## $ region        &lt;chr&gt; &quot;Aggregates&quot;, &quot;Aggregates&quot;, &quot;Aggregates&quot;, &quot;Aggregates&quot;, …
## $ capital       &lt;chr&gt; &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, …
## $ longitude     &lt;chr&gt; &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, …
## $ latitude      &lt;chr&gt; &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, …
## $ income        &lt;chr&gt; &quot;Aggregates&quot;, &quot;Aggregates&quot;, &quot;Aggregates&quot;, &quot;Aggregates&quot;, …
## $ lending       &lt;chr&gt; &quot;Aggregates&quot;, &quot;Aggregates&quot;, &quot;Aggregates&quot;, &quot;Aggregates&quot;, …</code></pre>
<p>If we would like to create a new binary variable based whether the
country is located in Europe and Central Asia, we could write:</p>
<div class="sourceCode" id="cb195"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb195-1"><a href="#cb195-1" aria-hidden="true" tabindex="-1"></a>wdi_data<span class="sc">$</span>euro_central <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(wdi_data<span class="sc">$</span>region <span class="sc">==</span> <span class="st">&quot;Europe &amp; Central Asia&quot;</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>)</span>
<span id="cb195-2"><a href="#cb195-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(wdi_data<span class="sc">$</span>region)</span></code></pre></div>
<pre><code>## 
##                 Aggregates        East Asia &amp; Pacific 
##                        945                        756 
##      Europe &amp; Central Asia  Latin America &amp; Caribbean 
##                       1197                        882 
## Middle East &amp; North Africa              North America 
##                        441                         63 
##                 South Asia         Sub-Saharan Africa 
##                        168                       1008</code></pre>
<div class="sourceCode" id="cb197"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb197-1"><a href="#cb197-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(wdi_data<span class="sc">$</span>euro_central)</span></code></pre></div>
<pre><code>## 
## FALSE  TRUE 
##  4263  1197</code></pre>
</div>
</div>
<div id="appendix-r-script" class="section level1">
<h1>Appendix: R Script</h1>
<div class="sourceCode" id="cb199"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb199-1"><a href="#cb199-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">echo =</span> <span class="cn">TRUE</span>)</span>
<span id="cb199-2"><a href="#cb199-2" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages(c(&quot;dplyr&quot;,&quot;haven&quot;,&quot;readr&quot;, &quot;tidyr&quot;,&quot;ggplot2&quot;,&quot;texreg&quot;,&quot;stringr&quot;,&quot;stringi&quot;,&quot;WDI&quot;))</span></span>
<span id="cb199-3"><a href="#cb199-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(haven)        <span class="co"># Import Data</span></span>
<span id="cb199-4"><a href="#cb199-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)        <span class="co"># Import Data</span></span>
<span id="cb199-5"><a href="#cb199-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)        <span class="co"># Data manipulation</span></span>
<span id="cb199-6"><a href="#cb199-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)      <span class="co"># Creating graphics</span></span>
<span id="cb199-7"><a href="#cb199-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)      <span class="co"># Deal with string data</span></span>
<span id="cb199-8"><a href="#cb199-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra)   <span class="co"># Build complex tables and manipulate table styles</span></span>
<span id="cb199-9"><a href="#cb199-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(WDI)          <span class="co"># Get data from the World Bank&#39;s API</span></span>
<span id="cb199-10"><a href="#cb199-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(psych)        <span class="co"># We use the describe() function from this package for summary statistics.</span></span>
<span id="cb199-11"><a href="#cb199-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(texreg)       <span class="co"># Convert regression output to Table</span></span>
<span id="cb199-12"><a href="#cb199-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stargazer)    <span class="co"># Convert regression output to Table</span></span>
<span id="cb199-13"><a href="#cb199-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(equatiomatic) <span class="co"># Provide an automatic way to show the equations of models fitted in R.</span></span>
<span id="cb199-14"><a href="#cb199-14" aria-hidden="true" tabindex="-1"></a><span class="dv">0</span></span>
<span id="cb199-15"><a href="#cb199-15" aria-hidden="true" tabindex="-1"></a><span class="fl">1.5</span></span>
<span id="cb199-16"><a href="#cb199-16" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span><span class="sc">/</span><span class="dv">4</span></span>
<span id="cb199-17"><a href="#cb199-17" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;Hello world&quot;</span></span>
<span id="cb199-18"><a href="#cb199-18" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb199-19"><a href="#cb199-19" aria-hidden="true" tabindex="-1"></a>a</span>
<span id="cb199-20"><a href="#cb199-20" aria-hidden="true" tabindex="-1"></a>my_string <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;hello&quot;</span>,<span class="st">&quot;world&quot;</span>,<span class="st">&quot;today&quot;</span>,<span class="st">&quot;is&quot;</span>,<span class="st">&quot;amazing&quot;</span>)</span>
<span id="cb199-21"><a href="#cb199-21" aria-hidden="true" tabindex="-1"></a>a <span class="sc">==</span> my_string</span>
<span id="cb199-22"><a href="#cb199-22" aria-hidden="true" tabindex="-1"></a>a <span class="sc">!=</span> my_string</span>
<span id="cb199-23"><a href="#cb199-23" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(<span class="dv">4</span>)</span>
<span id="cb199-24"><a href="#cb199-24" aria-hidden="true" tabindex="-1"></a>?sqrt</span>
<span id="cb199-25"><a href="#cb199-25" aria-hidden="true" tabindex="-1"></a>?log</span>
<span id="cb199-26"><a href="#cb199-26" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span>(<span class="dv">2</span>, <span class="dv">10</span>)</span>
<span id="cb199-27"><a href="#cb199-27" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span>(<span class="fu">sqrt</span>(<span class="dv">4</span>), <span class="dv">10</span>) <span class="co"># gives exactly the same as log(2, 10) above as sqrt(4) = 2</span></span>
<span id="cb199-28"><a href="#cb199-28" aria-hidden="true" tabindex="-1"></a>?paste</span>
<span id="cb199-29"><a href="#cb199-29" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(<span class="st">&quot;This&quot;</span>, <span class="st">&quot;is&quot;</span>, <span class="st">&quot;a&quot;</span>, <span class="st">&quot;full&quot;</span>, <span class="st">&quot;sentence&quot;</span>)</span>
<span id="cb199-30"><a href="#cb199-30" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(<span class="st">&quot;This&quot;</span>, <span class="st">&quot;is&quot;</span>, <span class="st">&quot;a&quot;</span>, <span class="st">&quot;full&quot;</span>, <span class="st">&quot;sentence&quot;</span>, <span class="at">sep=</span><span class="st">&quot;-&quot;</span>)</span>
<span id="cb199-31"><a href="#cb199-31" aria-hidden="true" tabindex="-1"></a>my.first.vector <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">6</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">12</span>, <span class="fl">2.4</span>, <span class="fl">0.3</span>, <span class="sc">-</span><span class="fl">2.56</span>, <span class="dv">3</span><span class="sc">/</span><span class="dv">4</span>, <span class="dv">2</span><span class="sc">+</span><span class="dv">3</span>)</span>
<span id="cb199-32"><a href="#cb199-32" aria-hidden="true" tabindex="-1"></a><span class="co"># the c() function stands for &quot;concatenate&quot; and is used to join objects together</span></span>
<span id="cb199-33"><a href="#cb199-33" aria-hidden="true" tabindex="-1"></a>my.first.vector</span>
<span id="cb199-34"><a href="#cb199-34" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(my.first.vector)</span>
<span id="cb199-35"><a href="#cb199-35" aria-hidden="true" tabindex="-1"></a>my.first.vector[<span class="dv">8</span>] <span class="co"># the value of the eighth element in our vector</span></span>
<span id="cb199-36"><a href="#cb199-36" aria-hidden="true" tabindex="-1"></a>my.first.vector[<span class="dv">1</span>] <span class="co"># the value of the first element in our vector</span></span>
<span id="cb199-37"><a href="#cb199-37" aria-hidden="true" tabindex="-1"></a>a.string.vector <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;here&quot;</span>, <span class="st">&quot;are&quot;</span>, <span class="st">&quot;some&quot;</span>, <span class="st">&quot;elements&quot;</span>)</span>
<span id="cb199-38"><a href="#cb199-38" aria-hidden="true" tabindex="-1"></a>a.string.vector</span>
<span id="cb199-39"><a href="#cb199-39" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(my.first.vector)</span>
<span id="cb199-40"><a href="#cb199-40" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(a.string.vector)</span>
<span id="cb199-41"><a href="#cb199-41" aria-hidden="true" tabindex="-1"></a>c <span class="ot">&lt;-</span> <span class="st">&quot;hello&quot;</span></span>
<span id="cb199-42"><a href="#cb199-42" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="st">&quot;world&quot;</span></span>
<span id="cb199-43"><a href="#cb199-43" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(c, d, <span class="at">sep =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb199-44"><a href="#cb199-44" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(c, d)</span>
<span id="cb199-45"><a href="#cb199-45" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(c, d, <span class="at">sep =</span> <span class="st">&quot;,&quot;</span>) <span class="co"># specifies the separator of the two objects!</span></span>
<span id="cb199-46"><a href="#cb199-46" aria-hidden="true" tabindex="-1"></a><span class="fu">paste0</span>(c, d)</span>
<span id="cb199-47"><a href="#cb199-47" aria-hidden="true" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="at">data =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>,  <span class="co"># the data in our matrix. Pick all integers from 1 to 12 (included)</span></span>
<span id="cb199-48"><a href="#cb199-48" aria-hidden="true" tabindex="-1"></a>            <span class="at">nrow =</span> <span class="dv">3</span>,     <span class="co"># the number of rows </span></span>
<span id="cb199-49"><a href="#cb199-49" aria-hidden="true" tabindex="-1"></a>            <span class="at">ncol =</span> <span class="dv">4</span>,     <span class="co"># the number of columns</span></span>
<span id="cb199-50"><a href="#cb199-50" aria-hidden="true" tabindex="-1"></a>            <span class="at">byrow =</span> <span class="cn">TRUE</span>) <span class="co"># do we want data to be stored in cells by row or by column?</span></span>
<span id="cb199-51"><a href="#cb199-51" aria-hidden="true" tabindex="-1"></a>m</span>
<span id="cb199-52"><a href="#cb199-52" aria-hidden="true" tabindex="-1"></a>m[<span class="dv">2</span>,<span class="dv">4</span>] <span class="co"># the object in the 2nd row, 4th column</span></span>
<span id="cb199-53"><a href="#cb199-53" aria-hidden="true" tabindex="-1"></a>m[,<span class="dv">1</span>]  <span class="co"># all the first column</span></span>
<span id="cb199-54"><a href="#cb199-54" aria-hidden="true" tabindex="-1"></a>m[<span class="dv">1</span>,]  <span class="co"># all the first row</span></span>
<span id="cb199-55"><a href="#cb199-55" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(m) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;one&quot;</span>, <span class="st">&quot;two&quot;</span>, <span class="st">&quot;three&quot;</span>, <span class="st">&quot;four&quot;</span>)</span>
<span id="cb199-56"><a href="#cb199-56" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(m) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>)</span>
<span id="cb199-57"><a href="#cb199-57" aria-hidden="true" tabindex="-1"></a>m</span>
<span id="cb199-58"><a href="#cb199-58" aria-hidden="true" tabindex="-1"></a>datafr <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb199-59"><a href="#cb199-59" aria-hidden="true" tabindex="-1"></a>  <span class="at">var1 =</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">&quot;a&quot;</span>, <span class="dv">3</span>), <span class="fu">rep</span>(<span class="st">&quot;b&quot;</span>, <span class="dv">4</span>), <span class="fu">rep</span>(<span class="st">&quot;c&quot;</span>, <span class="dv">2</span>), <span class="st">&quot;d&quot;</span>),</span>
<span id="cb199-60"><a href="#cb199-60" aria-hidden="true" tabindex="-1"></a>  <span class="at">var2 =</span> <span class="fu">rnorm</span>(<span class="at">n =</span> <span class="dv">10</span>, <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="fl">1.3</span>), <span class="co"># here we are drawing 10 random values from a </span></span>
<span id="cb199-61"><a href="#cb199-61" aria-hidden="true" tabindex="-1"></a>  <span class="co"># normal distribution with mean = 0 and sd = 1.3</span></span>
<span id="cb199-62"><a href="#cb199-62" aria-hidden="true" tabindex="-1"></a>  <span class="at">var3 =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="sc">-</span><span class="dv">4</span>, <span class="dv">2</span>, <span class="fl">4.2</span>, <span class="fl">5.3333</span>, <span class="dv">1</span><span class="sc">/</span><span class="dv">9</span>, <span class="fl">7.5</span>, <span class="fl">0.000</span>, <span class="dv">1-12</span>, <span class="fu">sqrt</span>(<span class="dv">2</span>)) <span class="co"># notice that here we are</span></span>
<span id="cb199-63"><a href="#cb199-63" aria-hidden="true" tabindex="-1"></a>  <span class="co"># creating a vector where the elements are expressions! We also include the squared root of 2</span></span>
<span id="cb199-64"><a href="#cb199-64" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb199-65"><a href="#cb199-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb199-66"><a href="#cb199-66" aria-hidden="true" tabindex="-1"></a>datafr</span>
<span id="cb199-67"><a href="#cb199-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb199-68"><a href="#cb199-68" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">var1 =</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">&quot;a&quot;</span>, <span class="dv">3</span>), <span class="fu">rep</span>(<span class="st">&quot;b&quot;</span>, <span class="dv">4</span>), <span class="fu">rep</span>(<span class="st">&quot;c&quot;</span>, <span class="dv">2</span>), <span class="st">&quot;d&quot;</span>),</span>
<span id="cb199-69"><a href="#cb199-69" aria-hidden="true" tabindex="-1"></a>                 <span class="at">var2 =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="cn">NA</span>,<span class="dv">7</span>,<span class="dv">8</span>,<span class="dv">9</span>,<span class="dv">10</span>))</span>
<span id="cb199-70"><a href="#cb199-70" aria-hidden="true" tabindex="-1"></a>df <span class="co"># we have a missing value in var2</span></span>
<span id="cb199-71"><a href="#cb199-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb199-72"><a href="#cb199-72" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(datafr)</span>
<span id="cb199-73"><a href="#cb199-73" aria-hidden="true" tabindex="-1"></a>datafr<span class="sc">$</span>var1 <span class="co"># this gives us precisely the object we want.</span></span>
<span id="cb199-74"><a href="#cb199-74" aria-hidden="true" tabindex="-1"></a>datafr<span class="sc">$</span>var3</span>
<span id="cb199-75"><a href="#cb199-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb199-76"><a href="#cb199-76" aria-hidden="true" tabindex="-1"></a>datafr<span class="sc">$</span>var2</span>
<span id="cb199-77"><a href="#cb199-77" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>var2</span>
<span id="cb199-78"><a href="#cb199-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb199-79"><a href="#cb199-79" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(datafr)</span>
<span id="cb199-80"><a href="#cb199-80" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(datafr<span class="sc">$</span>var1)</span>
<span id="cb199-81"><a href="#cb199-81" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(datafr<span class="sc">$</span>var2)</span>
<span id="cb199-82"><a href="#cb199-82" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(datafr<span class="sc">$</span>var3)</span>
<span id="cb199-83"><a href="#cb199-83" aria-hidden="true" tabindex="-1"></a>ls <span class="ot">&lt;-</span> <span class="fu">list</span>(df, datafr, datafr<span class="sc">$</span>var2)</span>
<span id="cb199-84"><a href="#cb199-84" aria-hidden="true" tabindex="-1"></a>ls</span>
<span id="cb199-85"><a href="#cb199-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb199-86"><a href="#cb199-86" aria-hidden="true" tabindex="-1"></a>ls2 <span class="ot">&lt;-</span> <span class="fu">list</span>(df, ls)</span>
<span id="cb199-87"><a href="#cb199-87" aria-hidden="true" tabindex="-1"></a>ls2</span>
<span id="cb199-88"><a href="#cb199-88" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb199-89"><a href="#cb199-89" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">&quot;~/Desktop/ESS_3x_website&quot;</span>)</span>
<span id="cb199-90"><a href="#cb199-90" aria-hidden="true" tabindex="-1"></a>ANES <span class="ot">&lt;-</span> <span class="fu">read_dta</span>(<span class="st">&quot;anesByState.dta&quot;</span>)</span>
<span id="cb199-91"><a href="#cb199-91" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(ANES)</span>
<span id="cb199-92"><a href="#cb199-92" aria-hidden="true" tabindex="-1"></a>csvfile <span class="ot">&lt;-</span> <span class="st">&quot;https://raw.githubusercontent.com/lorenzo-crippa/Intro_to_R/master/2021/baseball.csv&quot;</span></span>
<span id="cb199-93"><a href="#cb199-93" aria-hidden="true" tabindex="-1"></a>baseball <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(csvfile)</span>
<span id="cb199-94"><a href="#cb199-94" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(baseball)</span>
<span id="cb199-95"><a href="#cb199-95" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">&quot;http://www.principlesofeconometrics.com/stata/broiler.dta&quot;</span></span>
<span id="cb199-96"><a href="#cb199-96" aria-hidden="true" tabindex="-1"></a>data.df <span class="ot">&lt;-</span> <span class="fu">read_dta</span>(url)</span>
<span id="cb199-97"><a href="#cb199-97" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(data.df)</span>
<span id="cb199-98"><a href="#cb199-98" aria-hidden="true" tabindex="-1"></a>wdi_data <span class="ot">&lt;-</span> <span class="fu">WDI</span>(<span class="at">country =</span> <span class="st">&quot;all&quot;</span>, </span>
<span id="cb199-99"><a href="#cb199-99" aria-hidden="true" tabindex="-1"></a>               <span class="at">indicator =</span> <span class="fu">c</span>(<span class="at">population =</span> <span class="st">&quot;SP.POP.TOTL&quot;</span>,</span>
<span id="cb199-100"><a href="#cb199-100" aria-hidden="true" tabindex="-1"></a>                             <span class="at">gdp_percapita =</span> <span class="st">&quot;NY.GDP.PCAP.KD&quot;</span>), </span>
<span id="cb199-101"><a href="#cb199-101" aria-hidden="true" tabindex="-1"></a>               <span class="at">start =</span> <span class="dv">2000</span>, <span class="at">end =</span> <span class="dv">2020</span>, <span class="at">extra =</span> <span class="cn">TRUE</span>)</span>
<span id="cb199-102"><a href="#cb199-102" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(wdi_data)</span>
<span id="cb199-103"><a href="#cb199-103" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages(&quot;tidyverse&quot;)</span></span>
<span id="cb199-104"><a href="#cb199-104" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb199-105"><a href="#cb199-105" aria-hidden="true" tabindex="-1"></a>baseball.no.CLE <span class="ot">&lt;-</span> baseball[baseball<span class="sc">$</span>team <span class="sc">!=</span> <span class="st">&quot;CLE&quot;</span>, ]</span>
<span id="cb199-106"><a href="#cb199-106" aria-hidden="true" tabindex="-1"></a>baseball<span class="fl">.2</span> <span class="ot">&lt;-</span> baseball[baseball<span class="sc">$</span>team <span class="sc">==</span> <span class="st">&quot;NYY&quot;</span>, <span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>]</span>
<span id="cb199-107"><a href="#cb199-107" aria-hidden="true" tabindex="-1"></a>ANES <span class="ot">&lt;-</span> <span class="fu">filter</span>(ANES, <span class="co"># what is your data frame? </span></span>
<span id="cb199-108"><a href="#cb199-108" aria-hidden="true" tabindex="-1"></a>               year <span class="sc">!=</span> <span class="dv">2000</span>) <span class="co"># the condition you impose</span></span>
<span id="cb199-109"><a href="#cb199-109" aria-hidden="true" tabindex="-1"></a>ANES <span class="ot">&lt;-</span> <span class="fu">select</span>(ANES, </span>
<span id="cb199-110"><a href="#cb199-110" aria-hidden="true" tabindex="-1"></a>               <span class="sc">-</span>turnout) <span class="co"># keep everything BUT the variable named &quot;turnout&quot;</span></span>
<span id="cb199-111"><a href="#cb199-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb199-112"><a href="#cb199-112" aria-hidden="true" tabindex="-1"></a>ANES[<span class="fu">order</span>(ANES[,<span class="dv">2</span>], ANES[,<span class="dv">1</span>]),]</span>
<span id="cb199-113"><a href="#cb199-113" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(ANES<span class="sc">$</span>year) <span class="co"># all possible years in the ANES dataset</span></span>
<span id="cb199-114"><a href="#cb199-114" aria-hidden="true" tabindex="-1"></a><span class="co"># we might want to have it sorted:</span></span>
<span id="cb199-115"><a href="#cb199-115" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(<span class="fu">unique</span>(ANES<span class="sc">$</span>year)) <span class="co"># years from 1952 to 2008 by 2-year distance. </span></span>
<span id="cb199-116"><a href="#cb199-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb199-117"><a href="#cb199-117" aria-hidden="true" tabindex="-1"></a>ANES<span class="sc">$</span>new.var <span class="ot">&lt;-</span> ANES<span class="sc">$</span>poor<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb199-118"><a href="#cb199-118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb199-119"><a href="#cb199-119" aria-hidden="true" tabindex="-1"></a><span class="co"># we can also do it in tidyverse by doing:</span></span>
<span id="cb199-120"><a href="#cb199-120" aria-hidden="true" tabindex="-1"></a>ANES <span class="ot">&lt;-</span> <span class="fu">mutate</span>(ANES,</span>
<span id="cb199-121"><a href="#cb199-121" aria-hidden="true" tabindex="-1"></a>               <span class="at">new.var2 =</span> poor<span class="sc">*</span><span class="dv">2</span>)</span>
<span id="cb199-122"><a href="#cb199-122" aria-hidden="true" tabindex="-1"></a>ANES<span class="sc">$</span>indicator <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(<span class="at">test =</span> ANES<span class="sc">$</span>year <span class="sc">&gt;=</span> <span class="dv">2000</span>, <span class="at">yes =</span> <span class="dv">1</span>, <span class="at">no =</span> <span class="dv">0</span>)</span>
<span id="cb199-123"><a href="#cb199-123" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(ANES<span class="sc">$</span>indicator)</span>
<span id="cb199-124"><a href="#cb199-124" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(ANES)   <span class="co"># obtain all the variable names of a dataset</span></span>
<span id="cb199-125"><a href="#cb199-125" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(ANES)    </span>
<span id="cb199-126"><a href="#cb199-126" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(ANES) <span class="co"># get a glimpse of your data.</span></span>
<span id="cb199-127"><a href="#cb199-127" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(ANES<span class="sc">$</span>poor)</span>
<span id="cb199-128"><a href="#cb199-128" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(ANES<span class="sc">$</span>voteDem) </span>
<span id="cb199-129"><a href="#cb199-129" aria-hidden="true" tabindex="-1"></a><span class="fu">sd</span>(ANES<span class="sc">$</span>poor)</span>
<span id="cb199-130"><a href="#cb199-130" aria-hidden="true" tabindex="-1"></a><span class="fu">median</span>(ANES<span class="sc">$</span>dem)</span>
<span id="cb199-131"><a href="#cb199-131" aria-hidden="true" tabindex="-1"></a><span class="fu">min</span>(ANES<span class="sc">$</span>year)</span>
<span id="cb199-132"><a href="#cb199-132" aria-hidden="true" tabindex="-1"></a><span class="fu">max</span>(ANES<span class="sc">$</span>voteDem)</span>
<span id="cb199-133"><a href="#cb199-133" aria-hidden="true" tabindex="-1"></a><span class="fu">quantile</span>(ANES<span class="sc">$</span>poor, <span class="fl">0.3</span>) <span class="co"># the observation that leaves 30% of the observations to its left</span></span>
<span id="cb199-134"><a href="#cb199-134" aria-hidden="true" tabindex="-1"></a><span class="fu">quantile</span>(ANES<span class="sc">$</span>poor, <span class="fl">0.5</span>) <span class="co"># this will be the median of course!</span></span>
<span id="cb199-135"><a href="#cb199-135" aria-hidden="true" tabindex="-1"></a><span class="fu">median</span>(ANES<span class="sc">$</span>poor)</span>
<span id="cb199-136"><a href="#cb199-136" aria-hidden="true" tabindex="-1"></a><span class="fu">var</span>(ANES<span class="sc">$</span>dem) <span class="co"># the variance</span></span>
<span id="cb199-137"><a href="#cb199-137" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(ANES<span class="sc">$</span>year) <span class="co"># how often does each occurrence appear?</span></span>
<span id="cb199-138"><a href="#cb199-138" aria-hidden="true" tabindex="-1"></a><span class="fu">range</span>(ANES<span class="sc">$</span>year)</span>
<span id="cb199-139"><a href="#cb199-139" aria-hidden="true" tabindex="-1"></a><span class="fu">boxplot</span>(ANES<span class="sc">$</span>white)</span>
<span id="cb199-140"><a href="#cb199-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb199-141"><a href="#cb199-141" aria-hidden="true" tabindex="-1"></a><span class="co"># we can then intervene on options and modify its appearance:</span></span>
<span id="cb199-142"><a href="#cb199-142" aria-hidden="true" tabindex="-1"></a><span class="fu">boxplot</span>(ANES<span class="sc">$</span>white, <span class="at">frame =</span> F, <span class="at">ylab =</span> <span class="st">&quot;white&quot;</span>, <span class="at">main =</span> <span class="st">&quot;A boxplot&quot;</span>)</span>
<span id="cb199-143"><a href="#cb199-143" aria-hidden="true" tabindex="-1"></a>?boxplot</span>
<span id="cb199-144"><a href="#cb199-144" aria-hidden="true" tabindex="-1"></a><span class="co"># this would be the tidyverse way of doing it:</span></span>
<span id="cb199-145"><a href="#cb199-145" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(ANES, <span class="fu">aes</span>(<span class="at">y =</span> white)) <span class="sc">+</span></span>
<span id="cb199-146"><a href="#cb199-146" aria-hidden="true" tabindex="-1"></a>         <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb199-147"><a href="#cb199-147" aria-hidden="true" tabindex="-1"></a>         <span class="fu">theme_minimal</span>()</span>
<span id="cb199-148"><a href="#cb199-148" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(ANES<span class="sc">$</span>FTM, <span class="at">main =</span> <span class="st">&quot;Histogram of FTM&quot;</span>, <span class="at">xlab =</span> <span class="st">&quot;FTM&quot;</span>)</span>
<span id="cb199-149"><a href="#cb199-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb199-150"><a href="#cb199-150" aria-hidden="true" tabindex="-1"></a><span class="co"># and we can also intervene in the plot with options:</span></span>
<span id="cb199-151"><a href="#cb199-151" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(ANES<span class="sc">$</span>FTM, <span class="at">main =</span> <span class="st">&quot;Histogram of FTM&quot;</span>, <span class="at">xlab =</span> <span class="st">&quot;FTM&quot;</span>, <span class="at">probability =</span> <span class="cn">TRUE</span>) <span class="co"># to have probabilities</span></span>
<span id="cb199-152"><a href="#cb199-152" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(ANES, <span class="fu">aes</span>(<span class="at">x =</span> FTM)) <span class="sc">+</span></span>
<span id="cb199-153"><a href="#cb199-153" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb199-154"><a href="#cb199-154" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb199-155"><a href="#cb199-155" aria-hidden="true" tabindex="-1"></a><span class="fu">density</span>(ANES<span class="sc">$</span>dem)</span>
<span id="cb199-156"><a href="#cb199-156" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">density</span>(ANES<span class="sc">$</span>dem))</span>
<span id="cb199-157"><a href="#cb199-157" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="at">x =</span> baseball<span class="sc">$</span>heightinches, <span class="at">y =</span> baseball<span class="sc">$</span>weightpounds,</span>
<span id="cb199-158"><a href="#cb199-158" aria-hidden="true" tabindex="-1"></a>     <span class="at">frame.plot =</span> <span class="cn">FALSE</span>, <span class="at">xlab =</span> <span class="st">&quot;height&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;weight&quot;</span>,</span>
<span id="cb199-159"><a href="#cb199-159" aria-hidden="true" tabindex="-1"></a>     <span class="at">pch =</span> <span class="dv">20</span>) <span class="co"># pch is an option that selects the shape of dots we want </span></span>
<span id="cb199-160"><a href="#cb199-160" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb199-161"><a href="#cb199-161" aria-hidden="true" tabindex="-1"></a><span class="co"># what if we want to add lines on this plot? We use the abline() function</span></span>
<span id="cb199-162"><a href="#cb199-162" aria-hidden="true" tabindex="-1"></a><span class="co"># Maybe we want to plot a line corresponding to the mean height </span></span>
<span id="cb199-163"><a href="#cb199-163" aria-hidden="true" tabindex="-1"></a><span class="co"># lwd makes it thicker</span></span>
<span id="cb199-164"><a href="#cb199-164" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">v =</span> <span class="fu">mean</span>(baseball<span class="sc">$</span>heightinches, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">col =</span> <span class="st">&quot;red&quot;</span>, <span class="at">lwd =</span> <span class="dv">5</span>) </span>
<span id="cb199-165"><a href="#cb199-165" aria-hidden="true" tabindex="-1"></a>my.plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(baseball, <span class="fu">aes</span>(<span class="at">x =</span> heightinches, <span class="at">y =</span> weightpounds)) <span class="sc">+</span></span>
<span id="cb199-166"><a href="#cb199-166" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb199-167"><a href="#cb199-167" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb199-168"><a href="#cb199-168" aria-hidden="true" tabindex="-1"></a>my.plot</span>
<span id="cb199-169"><a href="#cb199-169" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(my.plot, <span class="at">filename =</span> <span class="st">&quot;my_first_ggplot.pdf&quot;</span>)</span>
<span id="cb199-170"><a href="#cb199-170" aria-hidden="true" tabindex="-1"></a><span class="fu">t.test</span>(ANES<span class="sc">$</span>poor) <span class="co"># by defaul it&#39;s a two-tailed t-test with null-value = 0</span></span>
<span id="cb199-171"><a href="#cb199-171" aria-hidden="true" tabindex="-1"></a><span class="fu">t.test</span>(ANES<span class="sc">$</span>FTM, <span class="at">mu =</span> <span class="dv">60</span>)</span>
<span id="cb199-172"><a href="#cb199-172" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb199-173"><a href="#cb199-173" aria-hidden="true" tabindex="-1"></a><span class="co"># ...and you can ask the test be one-sided:</span></span>
<span id="cb199-174"><a href="#cb199-174" aria-hidden="true" tabindex="-1"></a><span class="fu">t.test</span>(ANES<span class="sc">$</span>FTM, <span class="at">mu =</span> <span class="dv">60</span>, <span class="at">alternative =</span> <span class="st">&quot;less&quot;</span>)</span>
<span id="cb199-175"><a href="#cb199-175" aria-hidden="true" tabindex="-1"></a><span class="fu">t.test</span>(ANES<span class="sc">$</span>FTM, <span class="at">mu =</span> <span class="dv">60</span>, <span class="at">alternative =</span> <span class="st">&quot;greater&quot;</span>)</span>
<span id="cb199-176"><a href="#cb199-176" aria-hidden="true" tabindex="-1"></a><span class="fu">t.test</span>(<span class="at">x =</span> baseball<span class="sc">$</span>heightinches[baseball<span class="sc">$</span>team <span class="sc">==</span> <span class="st">&quot;NYY&quot;</span>],</span>
<span id="cb199-177"><a href="#cb199-177" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> baseball<span class="sc">$</span>heightinches[baseball<span class="sc">$</span>team <span class="sc">==</span> <span class="st">&quot;MIN&quot;</span>])</span>
<span id="cb199-178"><a href="#cb199-178" aria-hidden="true" tabindex="-1"></a>card <span class="ot">&lt;-</span> <span class="fu">read_dta</span>(<span class="st">&quot;Card_data.dta&quot;</span>)</span>
<span id="cb199-179"><a href="#cb199-179" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(card)</span>
<span id="cb199-180"><a href="#cb199-180" aria-hidden="true" tabindex="-1"></a>model1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(wage <span class="sc">~</span> exper, <span class="co"># your formula</span></span>
<span id="cb199-181"><a href="#cb199-181" aria-hidden="true" tabindex="-1"></a>             <span class="at">data =</span> card) <span class="co"># where are the data stored</span></span>
<span id="cb199-182"><a href="#cb199-182" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model1)</span>
<span id="cb199-183"><a href="#cb199-183" aria-hidden="true" tabindex="-1"></a>model2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(wage <span class="sc">~</span> exper <span class="sc">+</span> motheduc <span class="sc">+</span> fatheduc,</span>
<span id="cb199-184"><a href="#cb199-184" aria-hidden="true" tabindex="-1"></a>             <span class="at">data =</span> card)</span>
<span id="cb199-185"><a href="#cb199-185" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model2)</span>
<span id="cb199-186"><a href="#cb199-186" aria-hidden="true" tabindex="-1"></a>model3 <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="fu">log</span>(wage) <span class="sc">~</span> exper <span class="sc">+</span> motheduc <span class="sc">+</span> fatheduc,</span>
<span id="cb199-187"><a href="#cb199-187" aria-hidden="true" tabindex="-1"></a>             <span class="at">data =</span> card)</span>
<span id="cb199-188"><a href="#cb199-188" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model3)</span>
<span id="cb199-189"><a href="#cb199-189" aria-hidden="true" tabindex="-1"></a><span class="fu">extract_eq</span>(model3,<span class="at">wrap =</span> <span class="cn">TRUE</span>, <span class="at">use_coefs =</span> <span class="cn">TRUE</span>)</span>
<span id="cb199-190"><a href="#cb199-190" aria-hidden="true" tabindex="-1"></a><span class="co"># let&#39;s see how stargazer works</span></span>
<span id="cb199-191"><a href="#cb199-191" aria-hidden="true" tabindex="-1"></a><span class="fu">stargazer</span>(model1, model2, model3, <span class="at">type =</span> <span class="st">&quot;text&quot;</span>,</span>
<span id="cb199-192"><a href="#cb199-192" aria-hidden="true" tabindex="-1"></a>          <span class="at">keep.stat =</span> <span class="fu">c</span>(<span class="st">&quot;n&quot;</span>, <span class="st">&quot;rsq&quot;</span>, <span class="st">&quot;adj.rsq&quot;</span>, <span class="st">&quot;f&quot;</span>), <span class="at">df =</span> <span class="cn">FALSE</span>)</span>
<span id="cb199-193"><a href="#cb199-193" aria-hidden="true" tabindex="-1"></a>?stargazer</span>
<span id="cb199-194"><a href="#cb199-194" aria-hidden="true" tabindex="-1"></a><span class="co"># we can also extract statistics and information from our model objects:</span></span>
<span id="cb199-195"><a href="#cb199-195" aria-hidden="true" tabindex="-1"></a>model3<span class="sc">$</span>coefficients</span>
<span id="cb199-196"><a href="#cb199-196" aria-hidden="true" tabindex="-1"></a><span class="co"># model3$residuals</span></span>
<span id="cb199-197"><a href="#cb199-197" aria-hidden="true" tabindex="-1"></a>fit <span class="ot">&lt;-</span> model3<span class="sc">$</span>fitted.values</span>
<span id="cb199-198"><a href="#cb199-198" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb199-199"><a href="#cb199-199" aria-hidden="true" tabindex="-1"></a><span class="co"># and more:</span></span>
<span id="cb199-200"><a href="#cb199-200" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model3)<span class="sc">$</span>coefficients[,<span class="dv">1</span>] <span class="co"># these are the coefficients (the betas)</span></span>
<span id="cb199-201"><a href="#cb199-201" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model3)<span class="sc">$</span>coefficients[,<span class="dv">2</span>] <span class="co"># these are the standard errors of our coefficients</span></span>
<span id="cb199-202"><a href="#cb199-202" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model3)<span class="sc">$</span>coefficients[,<span class="dv">3</span>] <span class="co"># these are the t-statistics</span></span>
<span id="cb199-203"><a href="#cb199-203" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model3)<span class="sc">$</span>coefficients[,<span class="dv">4</span>] <span class="co"># these are the p-values</span></span>
<span id="cb199-204"><a href="#cb199-204" aria-hidden="true" tabindex="-1"></a><span class="co"># of course we could save this information in R objects</span></span>
<span id="cb199-205"><a href="#cb199-205" aria-hidden="true" tabindex="-1"></a>mod.glm <span class="ot">&lt;-</span> <span class="fu">glm</span>(enroll <span class="sc">~</span> fatheduc <span class="sc">+</span> motheduc <span class="sc">+</span></span>
<span id="cb199-206"><a href="#cb199-206" aria-hidden="true" tabindex="-1"></a>                 black <span class="sc">+</span> smsa <span class="sc">+</span> south <span class="sc">+</span> IQ,</span>
<span id="cb199-207"><a href="#cb199-207" aria-hidden="true" tabindex="-1"></a>               <span class="at">data =</span> card,</span>
<span id="cb199-208"><a href="#cb199-208" aria-hidden="true" tabindex="-1"></a>               <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">&quot;logit&quot;</span>))</span>
<span id="cb199-209"><a href="#cb199-209" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod.glm)</span>
<span id="cb199-210"><a href="#cb199-210" aria-hidden="true" tabindex="-1"></a><span class="fu">screenreg</span>(mod.glm)</span>
<span id="cb199-211"><a href="#cb199-211" aria-hidden="true" tabindex="-1"></a>myfunction <span class="ot">&lt;-</span> <span class="cf">function</span>(x){</span>
<span id="cb199-212"><a href="#cb199-212" aria-hidden="true" tabindex="-1"></a>  a <span class="ot">&lt;-</span> x<span class="sc">/</span><span class="dv">2</span></span>
<span id="cb199-213"><a href="#cb199-213" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(a)</span>
<span id="cb199-214"><a href="#cb199-214" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb199-215"><a href="#cb199-215" aria-hidden="true" tabindex="-1"></a><span class="fu">myfunction</span>(<span class="dv">4</span>)</span>
<span id="cb199-216"><a href="#cb199-216" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(wdi_data)</span>
<span id="cb199-217"><a href="#cb199-217" aria-hidden="true" tabindex="-1"></a>wdi_data<span class="sc">$</span>euro_central <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(wdi_data<span class="sc">$</span>region <span class="sc">==</span> <span class="st">&quot;Europe &amp; Central Asia&quot;</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>)</span>
<span id="cb199-218"><a href="#cb199-218" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(wdi_data<span class="sc">$</span>region)</span>
<span id="cb199-219"><a href="#cb199-219" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(wdi_data<span class="sc">$</span>euro_central)</span></code></pre></div>
</div>
</div>

   
   
      </div>
   <div class="col-md-2">
          <div id="toc">
       <button type="button" class="close">×</button>
       <ul>
       <li><a href="#packages-needed">Packages needed</a></li>
       <li><a href="#basic-r">Basic R</a>
       <ul>
       <li><a href="#r-data-type">R Data Type</a></li>
       <li><a href="#creating-and-assigning-objects">Creating and
       assigning objects</a></li>
       <li><a href="#logical-operators">Logical Operators</a></li>
       <li><a href="#functions">Functions</a></li>
       <li><a href="#data-structures">Data Structures</a></li>
       </ul></li>
       <li><a href="#import-and-manage-datasets">Import and Manage
       Datasets</a>
       <ul>
       <li><a href="#import-datasets">Import Datasets</a></li>
       <li><a href="#manage-datasets">Manage datasets</a></li>
       </ul></li>
       <li><a href="#get-summary-stats-and-plots">Get Summary Stats and
       Plots</a>
       <ul>
       <li><a href="#summary-statistics">Summary Statistics</a></li>
       <li><a href="#basic-plots">Basic plots</a></li>
       </ul></li>
       <li><a href="#run-basic-statistical-analyses">Run Basic
       Statistical Analyses</a>
       <ul>
       <li><a href="#t-tests">T-Tests</a></li>
       <li><a href="#statistical-models">Statistical models</a></li>
       </ul></li>
       <li><a href="#additional-sources">Additional Sources</a>
       <ul>
       <li><a href="#some-additional-packages">Some additional
       packages</a></li>
       <li><a href="#user-written-functions">User-written
       functions</a></li>
       <li><a href="#loop">Loop</a></li>
       <li><a href="#ifelse-statements">If/else statements</a></li>
       </ul></li>
       <li><a href="#appendix-r-script">Appendix: R Script</a></li>
       </ul>
     </div>
        </div>
   </div>
   </div>
            
      

  <script>
    $(document).ready(function () {

		// add bootstrap table styles to pandoc tables
	$('tr.header').parent('thead').parent('table').addClass('table table-condensed');
		
 	 	$('#content img').addClass("image-thumb");
		
		$('#content img:not(.no-lightbox)').addClass("image-lb");
	$('#content').magnificPopup({
	    type:'image',
	    closeOnContentClick: false,
	    closeBtnInside: false,
	    delegate: '.image-lb',
	    gallery: {enabled: false },
	    image: {
	        verticalFit: true,
		titleSrc: 'alt'
	    }
 	});
 	    });
  </script>



    <!-- dynamically load mathjax for compatibility with self-contained -->
  <script>
    (function () {
	var script = document.createElement("script");
	script.type = "text/javascript";
	script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
	document.getElementsByTagName("head")[0].appendChild(script);
    })();
  </script>
  
</body>
</html>
