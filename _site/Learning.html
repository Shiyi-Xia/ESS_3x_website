<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="pandoc" />

    
    
    <title>Learning</title>

        <script src="site_libs/header-attrs-2.14/header-attrs.js"></script>
        <script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link href="site_libs/bootstrap-3.3.7/css/bootstrap.min.css" rel="stylesheet" />
        <script src="site_libs/bootstrap-3.3.7/js/bootstrap.min.js"></script>
        <script src="site_libs/navigation-1.1/tabsets.js"></script>
        <link href="site_libs/magnific-popup-1.1.0/magnific-popup.css" rel="stylesheet" />
        <script src="site_libs/magnific-popup-1.1.0/jquery.magnific-popup.min.js"></script>
        <link href="site_libs/downcute-0.1/downcute.css" rel="stylesheet" />
        <link href="site_libs/downcute-0.1/downcute_fonts_embed.css" rel="stylesheet" />
        <script src="site_libs/downcute-0.1/downcute_styles.js"></script>
        <script src="site_libs/downcute-0.1/downcute.js"></script>
        <script src="site_libs/prism-1.22/prism.js"></script>
    
    
    
    
    <!-- tabsets -->
    <script>
      $(document).ready(function () {
	  window.buildTabsets("toc");
      });
      $(document).ready(function () {
	  $('.tabset-dropdown > .nav-tabs > li').click(function () {
	      $(this).parent().toggleClass('nav-tabs-open')
	  });
      });
    </script>

    <!-- code folding -->
    
    <!-- code download -->
    
    <!-- tabsets dropdown -->

    <style type="text/css">
      .tabset-dropdown > .nav-tabs {
	  display: inline-table;
	  max-height: 500px;
	  min-height: 44px;
	  overflow-y: auto;
	  background: white;
	  border: 1px solid #ddd;
	  border-radius: 4px;
      }
      
      .tabset-dropdown > .nav-tabs > li.active:before {
	  content: "";
	  font-family: 'Glyphicons Halflings';
	  display: inline-block;
	  padding: 10px;
	  border-right: 1px solid #ddd;
      }
      
      .tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
	  content: "&#xe258;";
	  border: none;
      }
      
      .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
	  content: "";
	  font-family: 'Glyphicons Halflings';
	  display: inline-block;
	  padding: 10px;
	  border-right: 1px solid #ddd;
      }
      
      .tabset-dropdown > .nav-tabs > li.active {
	  display: block;
      }

      .tabset-dropdown > .nav-tabs > li.active a {
  	  padding: 0 15px !important;
      }

      .tabset-dropdown > .nav-tabs > li > a,
      .tabset-dropdown > .nav-tabs > li > a:focus,
      .tabset-dropdown > .nav-tabs > li > a:hover {
	  border: none;
	  display: inline-block;
	  border-radius: 4px;
	  background-color: transparent;
      }
      
      .tabset-dropdown > .nav-tabs.nav-tabs-open > li {
	  display: block;
	  float: none;
      }
      
      .tabset-dropdown > .nav-tabs > li {
	  display: none;
	  margin-left: 0 !important;
      }
    </style>
    
</head>

<body class="preload">

   	
               <!-- downcute start -->   
   <div id="docute" class="Root theme-default">
     <div class="Page layout-narrow">
      <div class="Wrap">
        <div class="Sidebar">
          <div class="SidebarItems" id="toc">
            <ul>
            <li><a href="#packages-needed">Packages needed</a></li>
            <li><a href="#basic-r">Basic R</a>
            <ul>
            <li><a href="#r-data-type">R Data Type</a></li>
            <li><a href="#creating-and-assigning-objects">Creating and
            assigning objects</a></li>
            <li><a href="#logical-operators">Logical Operators</a></li>
            <li><a href="#functions">Functions</a></li>
            <li><a href="#data-structures">Data Structures</a></li>
            </ul></li>
            <li><a href="#import-and-manage-datasets">Import and Manage
            Datasets</a>
            <ul>
            <li><a href="#import-datasets">Import Datasets</a></li>
            <li><a href="#manage-datasets">Manage datasets</a></li>
            </ul></li>
            <li><a href="#get-summary-stats-and-plots">Get Summary Stats
            and Plots</a>
            <ul>
            <li><a href="#summary-statistics">Summary
            Statistics</a></li>
            <li><a href="#basic-plots">Basic plots</a></li>
            </ul></li>
            <li><a href="#run-basic-statistical-analyses">Run Basic
            Statistical Analyses</a>
            <ul>
            <li><a href="#t-tests">T-Tests</a></li>
            <li><a href="#statistical-models">Statistical
            models</a></li>
            </ul></li>
            <li><a href="#additional-sources">Additional Sources</a>
            <ul>
            <li><a href="#some-additional-packages">Some additional
            packages</a></li>
            <li><a href="#user-written-functions">User-written
            functions</a></li>
            <li><a href="#loop">Loop</a></li>
            <li><a href="#ifelse-statements">If/else statements</a></li>
            </ul></li>
            <li><a href="#appendix-r-script">Appendix: R Script</a></li>
            </ul>
          </div>
          <div data-position="sidebar:post-end" class="InjectedComponents"><div class="dark-theme-toggler"><div class="toggle "><div class="toggle-track"><div class="toggle-track-check"><img  src="data:image/png;base64,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" role="presentation" style="pointer-events: none;" width="16" height="16"></div> <div class="toggle-track-x"><img src="data:image/png;base64,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" role="presentation" style="pointer-events: none;" width="16" height="16"></div></div> <div class="toggle-thumb"></div></div> <input type="checkbox" aria-label="Switch between Dark and Default theme" class="toggler-screen-reader-only"></div></div>
        </div>
        <div class="Main">
          <div class="Content" id="content"> 
   
   
      
      <div class="navbar navbar-default  navbar-fixed-top" role="navigation">
        <div class="container">
          <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="index.html">ESS-3X: Introduction to R</a>
          </div>
          <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
              <li>
        <a href="index.html">Home</a>
      </li>
      <li>
        <a href="Learning.html">Learning</a>
      </li>
      <li>
        <a href="Exercise.html">Exercises</a>
      </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
              
            </ul>
          </div><!--/.nav-collapse -->
        </div><!--/.container -->
      </div><!--/.navbar -->
        
      <h1 class="title">Learning</h1>
      
      <p class="authors">
              

   
      
   
<!-- Don't indent these lines or it will mess pre blocks indentation --> 
<div class="page-content has-page-title">
<div id="packages-needed" class="section level2">
<h2>Packages needed</h2>
<pre class="r"><code>#install.packages(c(&quot;dplyr&quot;,&quot;haven&quot;,&quot;readr&quot;, &quot;tidyr&quot;,&quot;ggplot2&quot;,&quot;texreg&quot;,&quot;stringr&quot;,&quot;stringi&quot;,&quot;WDI&quot;))
library(haven)        # Import Data
library(readr)        # Import Data
library(dplyr)        # Data manipulation
library(ggplot2)      # Creating graphics
library(stringr)      # Deal with string data
library(kableExtra)   # Build complex tables and manipulate table styles
library(WDI)          # Get data from the World Bank&#39;s API
library(psych)        # We use the describe() function from this package for summary statistics.
library(texreg)       # Convert regression output to Table
library(stargazer)    # Convert regression output to Table
library(equatiomatic) # Provide an automatic way to show the equations of models fitted in R.</code></pre>
</div>
<div id="basic-r" class="section level1">
<h1>Basic R</h1>
<div id="r-data-type" class="section level2">
<h2>R Data Type</h2>
<p>What are the main types of data we will deal with?<br />
They can be:<br />
1. <strong>Number</strong></p>
<pre class="r"><code>0
1.5
3/4</code></pre>
<ol start="2" style="list-style-type: decimal">
<li><strong>String or Character</strong>:</li>
</ol>
<pre class="r"><code>&quot;Hello world&quot;</code></pre>
<ol start="3" style="list-style-type: decimal">
<li><p><strong>Category</strong>:</p>
<p>We will talk about this in a bit.</p></li>
<li><p><strong>Logical</strong>: (MUST use uppercase):</p>
<ul>
<li><p><strong>TRUE</strong></p></li>
<li><p><strong>FALSE</strong></p></li>
</ul></li>
</ol>
<p>Or we can use <strong>T</strong> and <strong>F</strong>.</p>
<ol start="5" style="list-style-type: decimal">
<li><p>Special Cases</p>
<ul>
<li><p>NA: missing data - the most important for today’s
purposes</p></li>
<li><p>NaN: not a number - will only happen if something has gone
wrong!</p></li>
<li><p>NULL: basically an undefined value - there’s nothing there (not
even missing data!)</p></li>
</ul></li>
</ol>
</div>
<div id="creating-and-assigning-objects" class="section level2">
<h2>Creating and assigning objects</h2>
<ul>
<li><strong>Everything that exits in R is an object.</strong></li>
</ul>
<p>Data types can be contained in R objects. By creating an object, we
save the information to our working environment so that we can recall it
whenever we want by just running the name of the object.</p>
<p><br />
In RStudio we make vast use of the <code>&lt;-</code> operator to assign
values to objects. We can obtain the operator quickly by typing the
“alt” + “-” keys together.</p>
<pre class="r"><code>a &lt;- 2</code></pre>
<p>The above code assigns the value of ‘2’ to an object called a.<br />
Notice that a is now in our <em>global environment</em> in the top-right
part of RStudio (unless you’ve changed your settings).</p>
<p>We can access the contents of a by running it as code:</p>
<pre class="r"><code>a</code></pre>
<pre><code>## [1] 2</code></pre>
<p>Normally, we could give the self-explanatory names to the
objects:</p>
<pre class="r"><code>my_string &lt;- c(&quot;hello&quot;,&quot;world&quot;,&quot;today&quot;,&quot;is&quot;,&quot;amazing&quot;)</code></pre>
</div>
<div id="logical-operators" class="section level2">
<h2>Logical Operators</h2>
<div id="equal" class="section level3">
<h3>Equal</h3>
<p><code>==</code> asks whether two values are the same or equal</p>
<pre class="r"><code>a == my_string</code></pre>
<pre><code>## [1] FALSE FALSE FALSE FALSE FALSE</code></pre>
</div>
<div id="not-equal" class="section level3">
<h3>Not Equal</h3>
<p><code>!=</code> asks whether two values are not the same or
equal.</p>
<pre class="r"><code>a != my_string</code></pre>
<pre><code>## [1] TRUE TRUE TRUE TRUE TRUE</code></pre>
</div>
<div id="greater-or-smaller" class="section level3">
<h3>Greater or Smaller</h3>
<p>We can also test whether certain values are:</p>
<ul>
<li><p><code>&gt;</code> greater than;</p></li>
<li><p><code>&lt;</code> smaller than;</p></li>
<li><p><code>&gt;=</code> greater or equals</p></li>
<li><p><code>&lt;=</code> smaller or equals</p></li>
</ul>
</div>
<div id="combine-logical-operators" class="section level3">
<h3>Combine Logical Operators</h3>
<ul>
<li><p><code>&amp;</code> stands for “and” (not very
surprising)</p></li>
<li><p><code>|</code> stands for “or”</p></li>
</ul>
</div>
</div>
<div id="functions" class="section level2">
<h2>Functions</h2>
<p>You may have noticed that so far we’ve seen the following math
operators: <code>*</code> <code>/</code> <code>+</code> <code>-</code>
<code>^</code> (multiplication, division, addition, subtraction,
exponentiation). But how do we get the square root of something?</p>
<p>We use the sqrt() function:</p>
<pre class="r"><code>sqrt(4)</code></pre>
<pre><code>## [1] 2</code></pre>
<p>The real power of R is in its functions. Both base R and many
packages (we’ll get onto these in a bit) have many useful functions for
us to use. The trick of course is in learning how to understand and find
functions. The best place to begin (if you know a function’s name) is by
putting a question mark before it, dropping the parentheses and running
it:</p>
<pre class="r"><code>?sqrt</code></pre>
<p>As you can see, this opens the function’s documentation in the help
panel in the bottom-right of RStudio. These documents can be a little
daunting sometimes, but you’ll get used to them. The most important
parts are:</p>
<ul>
<li><p>Usage - this shows us what order the arguments are in and what
defaults if there are any.</p></li>
<li><p>Arguments - these tell us what *inputs* the function is
expecting</p></li>
<li><p>Value - this tells us what *output* we expect from the function -
note that sqrt()’s documentation doesn’t have the value header but DOES
describe the output under details</p></li>
<li><p>Many documentations also include examples at the bottom.</p></li>
</ul>
<p>That may have been a lot - let’s look at another example:</p>
<pre class="r"><code>?log</code></pre>
<p>Notice for log() we have TWO arguments. The first is our input (x),
the second is the base of the logarithm. Notice that the default is that
we use the natural logarithm. If there is a default argument, R will use
this UNLESS you overwrite it!</p>
<p>To take the base 10 logarithm of the number 2:</p>
<pre class="r"><code>log(2, 10)</code></pre>
<pre><code>## [1] 0.30103</code></pre>
<p>Notice that we don’t need to explicitly name arguments. If we don’t
name our arguments, R will assume that we’re giving them in the order
listed in the ‘usage’ section of the documentation. Notice also that we
can ‘chain’ functions together:</p>
<pre class="r"><code>log(sqrt(4), 10) # gives exactly the same as log(2, 10) above as sqrt(4) = 2</code></pre>
<pre><code>## [1] 0.30103</code></pre>
<p>The evaluation order for R is inside to outside. In other words, R
will evaluate the function on the inside first, and the one on the
outside second. If you don’t know the name of a function or want to find
one, google is your best friend. A big chunk of getting good at R is
going to be getting good at finding what you need via google.</p>
<p>For example, to find the <a
href="https://www.google.com/search?q=r+exponential+function&amp;oq=R+exponential+function&amp;aqs=chrome.0.0l2j0i22i30l4j69i60l2.3764j0j4&amp;sourceid=chrome&amp;ie=UTF-8">exponential
function</a>.</p>
<p>Let’s try one more before we move on:</p>
<pre class="r"><code>?paste
paste(&quot;This&quot;, &quot;is&quot;, &quot;a&quot;, &quot;full&quot;, &quot;sentence&quot;)</code></pre>
<pre><code>## [1] &quot;This is a full sentence&quot;</code></pre>
<p>Notice the “…” in the arguments. This means we can give it as many
inputs as we want, BUT we’ll need to explicity name any further
arguments:</p>
<pre class="r"><code>paste(&quot;This&quot;, &quot;is&quot;, &quot;a&quot;, &quot;full&quot;, &quot;sentence&quot;, sep=&quot;-&quot;)</code></pre>
<pre><code>## [1] &quot;This-is-a-full-sentence&quot;</code></pre>
</div>
<div id="data-structures" class="section level2">
<h2>Data Structures</h2>
<p>There are many types of objects in R. Today we focus our attention
on:<br />
1) Vectors<br />
2) Matrices (2-dimensional vectors)<br />
3) Data Frames<br />
4) Lists</p>
<div id="vectors" class="section level3">
<h3>Vectors</h3>
<p>Vectors are one-dimensional objects that can have different lengths
and can contain different values, but all of the same nature (all
numeric, all characters, all logical…)</p>
<pre class="r"><code>my.first.vector &lt;- c(1, 5, 2, 6, 8, 9, 12, 2.4, 0.3, -2.56, 3/4, 2+3)
# the c() function stands for &quot;concatenate&quot; and is used to join objects together
my.first.vector</code></pre>
<pre><code>##  [1]  1.00  5.00  2.00  6.00  8.00  9.00 12.00  2.40  0.30 -2.56  0.75  5.00</code></pre>
<p>How long is my vector?</p>
<pre class="r"><code>length(my.first.vector)</code></pre>
<pre><code>## [1] 12</code></pre>
<p>You can access the value of a specific element in your vector using
squared brackets:</p>
<pre class="r"><code>my.first.vector[8] # the value of the eighth element in our vector</code></pre>
<pre><code>## [1] 2.4</code></pre>
<pre class="r"><code>my.first.vector[1] # the value of the first element in our vector</code></pre>
<pre><code>## [1] 1</code></pre>
<p>We can also store string elements in our vector:</p>
<pre class="r"><code>a.string.vector &lt;- c(&quot;here&quot;, &quot;are&quot;, &quot;some&quot;, &quot;elements&quot;)
a.string.vector</code></pre>
<pre><code>## [1] &quot;here&quot;     &quot;are&quot;      &quot;some&quot;     &quot;elements&quot;</code></pre>
<p>What data type is in the vector?</p>
<pre class="r"><code>class(my.first.vector)</code></pre>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<pre class="r"><code>class(a.string.vector)</code></pre>
<pre><code>## [1] &quot;character&quot;</code></pre>
<p>Again, paste() is a useful function to use with strings:</p>
<pre class="r"><code>c &lt;- &quot;hello&quot;
d &lt;- &quot;world&quot;
paste(c, d, sep = &quot;&quot;)</code></pre>
<pre><code>## [1] &quot;helloworld&quot;</code></pre>
<pre class="r"><code>c(c, d)</code></pre>
<pre><code>## [1] &quot;hello&quot; &quot;world&quot;</code></pre>
<pre class="r"><code>paste(c, d, sep = &quot;,&quot;) # specifies the separator of the two objects!</code></pre>
<pre><code>## [1] &quot;hello,world&quot;</code></pre>
<p>paste0() is a similar function,which by default puts no
separator:</p>
<pre class="r"><code>paste0(c, d)</code></pre>
<pre><code>## [1] &quot;helloworld&quot;</code></pre>
<p>Our vector can be a vector of factors. This is used to create
categorical variables.</p>
</div>
<div id="matrix" class="section level3">
<h3>Matrix</h3>
<p>A matrix is a two-dimensional vector. Besides being two-dimensional,
the same rules of vectors apply to matrix: a matrix can only contain
data of the same type.<br />
Suppose we want a 3x4 matrix with numbers from 1 to 12 in its cells:</p>
<pre class="r"><code>m &lt;- matrix(data = 1:12,  # the data in our matrix. Pick all integers from 1 to 12 (included)
            nrow = 3,     # the number of rows 
            ncol = 4,     # the number of columns
            byrow = TRUE) # do we want data to be stored in cells by row or by column?
m</code></pre>
<pre><code>##      [,1] [,2] [,3] [,4]
## [1,]    1    2    3    4
## [2,]    5    6    7    8
## [3,]    9   10   11   12</code></pre>
<p>We can access an individual element of a matrix in R by specifying
its position.</p>
<pre class="r"><code>m[2,4] # the object in the 2nd row, 4th column</code></pre>
<pre><code>## [1] 8</code></pre>
<pre class="r"><code>m[,1]  # all the first column</code></pre>
<pre><code>## [1] 1 5 9</code></pre>
<pre class="r"><code>m[1,]  # all the first row</code></pre>
<pre><code>## [1] 1 2 3 4</code></pre>
<p>We can also give names to columns and rows.</p>
<pre class="r"><code>colnames(m) &lt;- c(&quot;one&quot;, &quot;two&quot;, &quot;three&quot;, &quot;four&quot;)
rownames(m) &lt;- c(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;)
m</code></pre>
<pre><code>##   one two three four
## a   1   2     3    4
## b   5   6     7    8
## c   9  10    11   12</code></pre>
<p>I won’t be showing you matrix algebra in action during this class
(you’re unlikely to need it outside of introductory exercises and
advanced programming). But to summarise the available functions:</p>
<ul>
<li><span class="math inline">\(+\)</span> matrix addition</li>
<li><span class="math inline">\(*\)</span> multiplication by a
scalar</li>
<li><span class="math inline">\(%*%\)</span> matrix multiplication</li>
<li>t( ) transpose</li>
<li>solve( ) inverse</li>
<li>diag( ) get the diagonal</li>
</ul>
</div>
<div id="data-frame" class="section level3">
<h3>Data Frame</h3>
<p>They are perhaps the most common object we will deal with in R. Most
databases are imported automatically as data frames. They have multiple
variables organized in columns, and each row represents one
observation.</p>
<p>Before importing one, let’s create one from scratch and see how it
looks like.</p>
<pre class="r"><code>datafr &lt;- data.frame(
  var1 = c(rep(&quot;a&quot;, 3), rep(&quot;b&quot;, 4), rep(&quot;c&quot;, 2), &quot;d&quot;),
  var2 = rnorm(n = 10, mean = 0, sd = 1.3), # here we are drawing 10 random values from a 
  # normal distribution with mean = 0 and sd = 1.3
  var3 = c(1, -4, 2, 4.2, 5.3333, 1/9, 7.5, 0.000, 1-12, sqrt(2)) # notice that here we are
  # creating a vector where the elements are expressions! We also include the squared root of 2
)

datafr</code></pre>
<pre><code>##    var1        var2        var3
## 1     a -1.01232121   1.0000000
## 2     a -0.04761299  -4.0000000
## 3     a  1.20558205   2.0000000
## 4     b  1.26396546   4.2000000
## 5     b -0.65507976   5.3333000
## 6     b  0.52927069   0.1111111
## 7     b -0.61224097   7.5000000
## 8     c  0.94587598   0.0000000
## 9     c  1.66394135 -11.0000000
## 10    d -0.79557489   1.4142136</code></pre>
<p>Each variable within our data frame is a vector, and the rules of
vectors apply to them. All variables in a data frame must have the same
length. But we might have variables with missing values. In R these
missing values are called NA:</p>
<pre class="r"><code>df &lt;- data.frame(var1 = c(rep(&quot;a&quot;, 3), rep(&quot;b&quot;, 4), rep(&quot;c&quot;, 2), &quot;d&quot;),
                 var2 = c(1,2,3,4,5,NA,7,8,9,10))
df # we have a missing value in var2</code></pre>
<pre><code>##    var1 var2
## 1     a    1
## 2     a    2
## 3     a    3
## 4     b    4
## 5     b    5
## 6     b   NA
## 7     b    7
## 8     c    8
## 9     c    9
## 10    d   10</code></pre>
<pre class="r"><code>class(datafr)</code></pre>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<p>We can assess information in one column of our data frame using
<strong>$</strong> operator:</p>
<pre class="r"><code>datafr$var1 # this gives us precisely the object we want.</code></pre>
<pre><code>##  [1] &quot;a&quot; &quot;a&quot; &quot;a&quot; &quot;b&quot; &quot;b&quot; &quot;b&quot; &quot;b&quot; &quot;c&quot; &quot;c&quot; &quot;d&quot;</code></pre>
<pre class="r"><code>datafr$var3</code></pre>
<pre><code>##  [1]   1.0000000  -4.0000000   2.0000000   4.2000000   5.3333000   0.1111111
##  [7]   7.5000000   0.0000000 -11.0000000   1.4142136</code></pre>
<pre class="r"><code>datafr$var2</code></pre>
<pre><code>##  [1] -1.01232121 -0.04761299  1.20558205  1.26396546 -0.65507976  0.52927069
##  [7] -0.61224097  0.94587598  1.66394135 -0.79557489</code></pre>
<pre class="r"><code>df$var2</code></pre>
<pre><code>##  [1]  1  2  3  4  5 NA  7  8  9 10</code></pre>
<pre class="r"><code>class(datafr)</code></pre>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<pre class="r"><code>class(datafr$var1)</code></pre>
<pre><code>## [1] &quot;character&quot;</code></pre>
<pre class="r"><code>class(datafr$var2)</code></pre>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<pre class="r"><code>class(datafr$var3)</code></pre>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
</div>
<div id="list" class="section level3">
<h3>List</h3>
<p>Lists are the last object type that we briefly introduce today. Lists
are objects that include different other objects in R, of whatever type.
A list can even contain another list.</p>
<pre class="r"><code>ls &lt;- list(df, datafr, datafr$var2)
ls</code></pre>
<pre><code>## [[1]]
##    var1 var2
## 1     a    1
## 2     a    2
## 3     a    3
## 4     b    4
## 5     b    5
## 6     b   NA
## 7     b    7
## 8     c    8
## 9     c    9
## 10    d   10
## 
## [[2]]
##    var1        var2        var3
## 1     a -1.01232121   1.0000000
## 2     a -0.04761299  -4.0000000
## 3     a  1.20558205   2.0000000
## 4     b  1.26396546   4.2000000
## 5     b -0.65507976   5.3333000
## 6     b  0.52927069   0.1111111
## 7     b -0.61224097   7.5000000
## 8     c  0.94587598   0.0000000
## 9     c  1.66394135 -11.0000000
## 10    d -0.79557489   1.4142136
## 
## [[3]]
##  [1] -1.01232121 -0.04761299  1.20558205  1.26396546 -0.65507976  0.52927069
##  [7] -0.61224097  0.94587598  1.66394135 -0.79557489</code></pre>
<pre class="r"><code>ls2 &lt;- list(df, ls)
ls2</code></pre>
<pre><code>## [[1]]
##    var1 var2
## 1     a    1
## 2     a    2
## 3     a    3
## 4     b    4
## 5     b    5
## 6     b   NA
## 7     b    7
## 8     c    8
## 9     c    9
## 10    d   10
## 
## [[2]]
## [[2]][[1]]
##    var1 var2
## 1     a    1
## 2     a    2
## 3     a    3
## 4     b    4
## 5     b    5
## 6     b   NA
## 7     b    7
## 8     c    8
## 9     c    9
## 10    d   10
## 
## [[2]][[2]]
##    var1        var2        var3
## 1     a -1.01232121   1.0000000
## 2     a -0.04761299  -4.0000000
## 3     a  1.20558205   2.0000000
## 4     b  1.26396546   4.2000000
## 5     b -0.65507976   5.3333000
## 6     b  0.52927069   0.1111111
## 7     b -0.61224097   7.5000000
## 8     c  0.94587598   0.0000000
## 9     c  1.66394135 -11.0000000
## 10    d -0.79557489   1.4142136
## 
## [[2]][[3]]
##  [1] -1.01232121 -0.04761299  1.20558205  1.26396546 -0.65507976  0.52927069
##  [7] -0.61224097  0.94587598  1.66394135 -0.79557489</code></pre>
<p>There are many functions that allow you to try to coerce the nature
of an object:<br />
- as.numeric() tries to coerce its argument into a numeric.<br />
- as.integer() tries to coerce its argument into an integer.<br />
- as.character() tries to coerce its argument into a character.<br />
- as.factor() tries to coerce its argument into a factor.<br />
</p>
<p>And also its class! - as.matrix() - as.data.frame() - as.array() -
as.list()</p>
</div>
</div>
</div>
<div id="import-and-manage-datasets" class="section level1">
<h1>Import and Manage Datasets</h1>
<div id="import-datasets" class="section level2">
<h2>Import Datasets</h2>
<p>Now, we will learn how to import different types of databases from
outside. First, let’s clean our enviornment before dealing with
databases.</p>
<pre class="r"><code>rm(list = ls())</code></pre>
<p>Or by clicking on session -&gt; clear workspace -&gt; yes.</p>
<p>If you do it by code, make sure to keep that line <strong>at the
top</strong> of your script. It’s really important that you start fresh
each time you do work in R, to make sure that your workflow (the order
you do things) is replicable. In other words, it helps make sure that
your future self or someone else can open up your script,run everything,
and get the same result every time.<br />
</p>
<p>Then, we must set up our working directory, the folder on our
computer where we are going to work from, where we store our data and
where perhaps we might want to save our plots or the outputs from the
analysis.<br />
</p>
<p>In R, we do it using the setwd() function:</p>
<pre class="r"><code>setwd(&quot;~/Desktop/ESS_3x_website&quot;)</code></pre>
<p>Now import data from a csv file and save it in a named object.</p>
<p>The choice across various functions of importing data depends on the
data type, e.g. <strong>.dta</strong>, <strong>.csv</strong>, or
<strong>.xlsx</strong>.</p>
<pre class="r"><code>ANES &lt;- read_dta(&quot;anesByState.dta&quot;)
head(ANES)</code></pre>
<pre><code>## # A tibble: 6 x 8
##    year     state   FTM white   poor turnout voteDem   dem
##   &lt;dbl&gt; &lt;dbl+lbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;
## 1  1984    4 [NH]  73.6 1     0.118     1.81   0.231 0.205
## 2  1986    4 [NH]  76.7 0.944 0.154     1.44   0     0.333
## 3  1988    4 [NH]  66.3 0.935 0.0667    1.76   0.161 0.194
## 4  1990    4 [NH]  72.6 0.959 0.0476    1.49   0     0.184
## 5  1992    4 [NH]  50.6 0.914 0.0909    1.83   0.278 0.25 
## 6  1994    4 [NH]  52.7 1     0.286     1.60   0     0.133</code></pre>
<pre class="r"><code>csvfile &lt;- &quot;https://raw.githubusercontent.com/lorenzo-crippa/Intro_to_R/master/2021/baseball.csv&quot;
baseball &lt;- read.csv(csvfile)
head(baseball)</code></pre>
<pre><code>##   X            name team heightinches weightpounds
## 1 1   Adam_Donachie  BAL           74          180
## 2 2       Paul_Bako  BAL           74          215
## 3 3 Ramon_Hernandez  BAL           72          210
## 4 4    Kevin_Millar  BAL           72          210
## 5 5     Chris_Gomez  BAL           73          188
## 6 6   Brian_Roberts  BAL           69          176</code></pre>
<p>Yes! We could import a data file from a URL:</p>
<pre class="r"><code>url &lt;- &quot;http://www.principlesofeconometrics.com/stata/broiler.dta&quot;
data.df &lt;- read_dta(url)
head(data.df)</code></pre>
<pre><code>## # A tibble: 6 x 12
##    year     q     y pchick pbeef  pcor    pf   cpi  qproda   pop meatex  time
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;
## 1  1950  14.3  7863   69.5  31.2  59.8    NA  24.1 2628500  152.     NA    41
## 2  1951  15.1  7953   72.9  36.5  72.1    NA  26   2843000  154.     NA    42
## 3  1952  15.3  8071   73.1  36.2  71.3    NA  26.5 2851200  157.     NA    43
## 4  1953  15.2  8319   71.3  28.5  62.7    NA  26.7 2953900  160.     NA    44
## 5  1954  15.8  8276   64.4  27.4  63.4    NA  26.9 3099700  162.     NA    45
## 6  1955  14.7  8675   67    27.1  56.1    NA  26.8 2958100  165.     NA    46</code></pre>
<p>In addition, although we won’t get into the details of this method,
some packages allow users to search and download data,
e.g. <strong>WDI</strong>, <strong>V-Dem, democracyData</strong>. Here
is an example of importing World Bank Data automatically.</p>
<pre class="r"><code>wdi_data &lt;- WDI(country = &quot;all&quot;, 
               indicator = c(population = &quot;SP.POP.TOTL&quot;,
                             gdp_percapita = &quot;NY.GDP.PCAP.KD&quot;), 
               start = 2000, end = 2020, extra = TRUE)
head(wdi_data)</code></pre>
<pre><code>##   iso2c    country year population gdp_percapita iso3c     region capital
## 1    1A Arab World 2005  314965776      5532.099   ARB Aggregates        
## 2    1A Arab World 2004  307862846      5363.638   ARB Aggregates        
## 3    1A Arab World 2017  411942825      6386.722   ARB Aggregates        
## 4    1A Arab World 2016  404042892      6431.676   ARB Aggregates        
## 5    1A Arab World 2008  338395936      6029.585   ARB Aggregates        
## 6    1A Arab World 2006  322452764      5732.229   ARB Aggregates        
##   longitude latitude     income    lending
## 1                    Aggregates Aggregates
## 2                    Aggregates Aggregates
## 3                    Aggregates Aggregates
## 4                    Aggregates Aggregates
## 5                    Aggregates Aggregates
## 6                    Aggregates Aggregates</code></pre>
<p>Here is the common data types, and the corresponding functions and
packages.</p>
<table>
<thead>
<tr class="header">
<th>Data Type</th>
<th>Function</th>
<th>Package</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>.dta</strong></td>
<td>read_dta</td>
<td>haven</td>
</tr>
<tr class="even">
<td></td>
<td>read.dta</td>
<td>foreign</td>
</tr>
<tr class="odd">
<td><strong>.csv</strong></td>
<td>read_csv</td>
<td>readr</td>
</tr>
<tr class="even">
<td></td>
<td>read.csv</td>
<td></td>
</tr>
<tr class="odd">
<td><strong>.xls</strong></td>
<td>read_excel</td>
<td>readxl</td>
</tr>
<tr class="even">
<td><strong>.xlsx</strong></td>
<td>read_excek</td>
<td>readxl</td>
</tr>
<tr class="odd">
<td><strong>.txt</strong></td>
<td>read.delim</td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div id="manage-datasets" class="section level2">
<h2>Manage datasets</h2>
<p>Database management like dropping observations and variables,sorting
the data and the other, can be done using the basic R language.</p>
<p>However, a suite of packages has also been developed to write code in
R in much more natural syntax. The suite is called tidyverse. We can
install it by running:</p>
<pre class="r"><code>#install.packages(&quot;tidyverse&quot;)
library(tidyverse)</code></pre>
<pre><code>## ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.1 ──</code></pre>
<pre><code>## ✓ tibble  3.1.2     ✓ purrr   0.3.4
## ✓ tidyr   1.1.3     ✓ forcats 0.5.1</code></pre>
<pre><code>## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
## x psych::%+%()             masks ggplot2::%+%()
## x psych::alpha()           masks ggplot2::alpha()
## x tidyr::extract()         masks texreg::extract()
## x dplyr::filter()          masks stats::filter()
## x kableExtra::group_rows() masks dplyr::group_rows()
## x dplyr::lag()             masks stats::lag()</code></pre>
<p>In what follows, you’ll see code for managing datasets in base R,and
next you’ll see the (more intuitive) tidyverse version of the same
operations. It’s important to know both.</p>
<p>Suppose now we want to drop from our baseball data all observations
that refer to the CLE team (no offense to its fans). Doing it in base R
would be:</p>
<pre class="r"><code>baseball.no.CLE &lt;- baseball[baseball$team != &quot;CLE&quot;, ]</code></pre>
<p>Suppose now we want to get rid of all observations that are not for
New York Yankees (NYY) and also we want to drop the column “name”. Yet,
we don’t want to overwrite the “baseball” object because we might need
the information we’re dropping later. We can do the following:</p>
<pre class="r"><code>baseball.2 &lt;- baseball[baseball$team == &quot;NYY&quot;, 2:4]</code></pre>
<p>These operations are made smoother by tidverse Let’s do something
similar on ANES. Let’s remove all observations from the year 2000, then
remove the variable turnout:</p>
<pre class="r"><code>ANES &lt;- filter(ANES, # what is your data frame? 
               year != 2000) # the condition you impose
ANES &lt;- select(ANES, 
               -turnout) # keep everything BUT the variable named &quot;turnout&quot;</code></pre>
<p>Now suppose we want to sort observations in our ANES dataset based on
state, then year.We can do it by:</p>
<pre class="r"><code>ANES[order(ANES[,2], ANES[,1]),]</code></pre>
<pre><code>## # A tibble: 249 x 7
##     year     state   FTM white   poor voteDem    dem
##    &lt;dbl&gt; &lt;dbl+lbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;
##  1  1984    4 [NH]  73.6 1     0.118    0.231 0.205 
##  2  1986    4 [NH]  76.7 0.944 0.154    0     0.333 
##  3  1988    4 [NH]  66.3 0.935 0.0667   0.161 0.194 
##  4  1990    4 [NH]  72.6 0.959 0.0476   0     0.184 
##  5  1992    4 [NH]  50.6 0.914 0.0909   0.278 0.25  
##  6  1994    4 [NH]  52.7 1     0.286    0     0.133 
##  7  1996    4 [NH]  56.9 1     0.176    0.278 0.167 
##  8  1998    4 [NH]  41.8 1     0.0833   0     0.25  
##  9  2002    4 [NH]  72.6 0.923 0        0     0.0769
## 10  2004    4 [NH]  51.6 0.917 0.167    0.308 0.308 
## # … with 239 more rows</code></pre>
<p>By doing this we have taken ANES and we have asked R to reorder its
rows first based on the second column (state), then by its first column
(year). Notice that this time we have not saved the data frame obtained
into an object!</p>
<p>Another useful function is unique(). It tells us what values a vector
takes:</p>
<pre class="r"><code>unique(ANES$year) # all possible years in the ANES dataset</code></pre>
<pre><code>##  [1] 1984 1986 1988 1990 1992 1994 1996 1998 2002 2004 1952 1956 1958 1960 1962
## [16] 1964 1966 1968 1970 1972 1974 1976 1978 1980 1982 2008</code></pre>
<pre class="r"><code># we might want to have it sorted:
sort(unique(ANES$year)) # years from 1952 to 2008 by 2-year distance. </code></pre>
<pre><code>##  [1] 1952 1956 1958 1960 1962 1964 1966 1968 1970 1972 1974 1976 1978 1980 1982
## [16] 1984 1986 1988 1990 1992 1994 1996 1998 2002 2004 2008</code></pre>
<p>We can also add variables to our data frames. What if we wanted to
add the squared valueof “poor” in the ANES data frame? In base R this is
done by doing:</p>
<pre class="r"><code>ANES$new.var &lt;- ANES$poor^2

# we can also do it in tidyverse by doing:
ANES &lt;- mutate(ANES,
               new.var2 = poor*2)</code></pre>
<p>ifelse() is a function that is very useful to know. If its “test”
argument (a condition) is verified, it does what the “yes” argument
says. Otherwise, it executes the “no” argument. For instance, in ANES we
might want to have a variable that takes value 0, if the year is before
2000, and 1 otherwise. We can do it like this:</p>
<pre class="r"><code>ANES$indicator &lt;- ifelse(test = ANES$year &gt;= 2000, yes = 1, no = 0)
unique(ANES$indicator)</code></pre>
<pre><code>## [1] 0 1</code></pre>
</div>
</div>
<div id="get-summary-stats-and-plots" class="section level1">
<h1>Get Summary Stats and Plots</h1>
<div id="summary-statistics" class="section level2">
<h2>Summary Statistics</h2>
<p>When we first obtain a data object in R, there are several things
that we could do:</p>
<pre class="r"><code>names(ANES)   # obtain all the variable names of a dataset</code></pre>
<pre><code>##  [1] &quot;year&quot;      &quot;state&quot;     &quot;FTM&quot;       &quot;white&quot;     &quot;poor&quot;      &quot;voteDem&quot;  
##  [7] &quot;dem&quot;       &quot;new.var&quot;   &quot;new.var2&quot;  &quot;indicator&quot;</code></pre>
<pre class="r"><code>head(ANES)    </code></pre>
<pre><code>## # A tibble: 6 x 10
##    year     state   FTM white   poor voteDem   dem new.var new.var2 indicator
##   &lt;dbl&gt; &lt;dbl+lbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
## 1  1984    4 [NH]  73.6 1     0.118    0.231 0.205 0.0138    0.235          0
## 2  1986    4 [NH]  76.7 0.944 0.154    0     0.333 0.0237    0.308          0
## 3  1988    4 [NH]  66.3 0.935 0.0667   0.161 0.194 0.00444   0.133          0
## 4  1990    4 [NH]  72.6 0.959 0.0476   0     0.184 0.00227   0.0952         0
## 5  1992    4 [NH]  50.6 0.914 0.0909   0.278 0.25  0.00826   0.182          0
## 6  1994    4 [NH]  52.7 1     0.286    0     0.133 0.0816    0.571          0</code></pre>
<pre class="r"><code>glimpse(ANES) # get a glimpse of your data.</code></pre>
<pre><code>## Rows: 249
## Columns: 10
## $ year      &lt;dbl&gt; 1984, 1986, 1988, 1990, 1992, 1994, 1996, 1998, 2002, 2004, …
## $ state     &lt;dbl+lbl&gt;  4,  4,  4,  4,  4,  4,  4,  4,  4,  4, 13, 13, 13, 13, …
## $ FTM       &lt;dbl&gt; 73.61539, 76.73333, 66.31035, 72.63265, 50.61111, 52.66667, …
## $ white     &lt;dbl&gt; 1.0000000, 0.9444444, 0.9354839, 0.9591837, 0.9142857, 1.000…
## $ poor      &lt;dbl&gt; 0.11764706, 0.15384616, 0.06666667, 0.04761905, 0.09090909, …
## $ voteDem   &lt;dbl&gt; 0.2307692, 0.0000000, 0.1612903, 0.0000000, 0.2777778, 0.000…
## $ dem       &lt;dbl&gt; 0.20512821, 0.33333334, 0.19354838, 0.18367347, 0.25000000, …
## $ new.var   &lt;dbl&gt; 0.013840831, 0.023668641, 0.004444445, 0.002267574, 0.008264…
## $ new.var2  &lt;dbl&gt; 0.2352941, 0.3076923, 0.1333333, 0.0952381, 0.1818182, 0.571…
## $ indicator &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …</code></pre>
<p>If we want to get some description of our data.</p>
<pre class="r"><code>summary(ANES$poor)</code></pre>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##  0.0000  0.1093  0.1667  0.1825  0.2297  0.6923</code></pre>
<p>We can also ask for specific information:</p>
<pre class="r"><code>mean(ANES$voteDem) </code></pre>
<pre><code>## [1] 0.1580367</code></pre>
<pre class="r"><code>sd(ANES$poor)</code></pre>
<pre><code>## [1] 0.1167872</code></pre>
<pre class="r"><code>median(ANES$dem)</code></pre>
<pre><code>## [1] 0.3415638</code></pre>
<pre class="r"><code>min(ANES$year)</code></pre>
<pre><code>## [1] 1952</code></pre>
<pre class="r"><code>max(ANES$voteDem)</code></pre>
<pre><code>## [1] 0.6666667</code></pre>
<pre class="r"><code>quantile(ANES$poor, 0.3) # the observation that leaves 30% of the observations to its left</code></pre>
<pre><code>##       30% 
## 0.1275826</code></pre>
<pre class="r"><code>quantile(ANES$poor, 0.5) # this will be the median of course!</code></pre>
<pre><code>##       50% 
## 0.1666667</code></pre>
<pre class="r"><code>median(ANES$poor)</code></pre>
<pre><code>## [1] 0.1666667</code></pre>
<pre class="r"><code>var(ANES$dem) # the variance</code></pre>
<pre><code>## [1] 0.03924865</code></pre>
<pre class="r"><code>table(ANES$year) # how often does each occurrence appear?</code></pre>
<pre><code>## 
## 1952 1956 1958 1960 1962 1964 1966 1968 1970 1972 1974 1976 1978 1980 1982 1984 
##    9    8    8    8    9    9    9    9    9   10   10   10   10   10   10   10 
## 1986 1988 1990 1992 1994 1996 1998 2002 2004 2008 
##   10   10   10   10   10   11    9   12    9   10</code></pre>
<pre class="r"><code>range(ANES$year)</code></pre>
<pre><code>## [1] 1952 2008</code></pre>
</div>
<div id="basic-plots" class="section level2">
<h2>Basic plots</h2>
<p>We now want to obtain some plots about our data. We will see how
to:</p>
<ol style="list-style-type: decimal">
<li><p>obtain boxplots</p></li>
<li><p>obtain histograms</p></li>
<li><p>obtain density plots</p></li>
<li><p>obtain twoway plots</p></li>
</ol>
<div id="boxplots" class="section level3">
<h3>Boxplots</h3>
<p>To create a boxplot:</p>
<pre class="r"><code>boxplot(ANES$white)</code></pre>
<p><img src="Learning_files/figure-html/unnamed-chunk-47-1.png" width="768" /></p>
<pre class="r"><code># we can then intervene on options and modify its appearance:
boxplot(ANES$white, frame = F, ylab = &quot;white&quot;, main = &quot;A boxplot&quot;)</code></pre>
<p><img src="Learning_files/figure-html/unnamed-chunk-47-2.png" width="768" /></p>
<pre class="r"><code>?boxplot</code></pre>
<p>We could also:</p>
<pre class="r"><code># this would be the tidyverse way of doing it:
ggplot(ANES, aes(y = white)) +
         geom_boxplot() +
         theme_minimal()</code></pre>
<p><img src="Learning_files/figure-html/unnamed-chunk-48-1.png" width="768" /></p>
</div>
<div id="histograms" class="section level3">
<h3>Histograms</h3>
<p>Plotting a histogram is also easy and similar to create a
boxplot:</p>
<pre class="r"><code>hist(ANES$FTM, main = &quot;Histogram of FTM&quot;, xlab = &quot;FTM&quot;)</code></pre>
<p><img src="Learning_files/figure-html/unnamed-chunk-49-1.png" width="768" /></p>
<pre class="r"><code># and we can also intervene in the plot with options:
hist(ANES$FTM, main = &quot;Histogram of FTM&quot;, xlab = &quot;FTM&quot;, probability = TRUE) # to have probabilities</code></pre>
<p><img src="Learning_files/figure-html/unnamed-chunk-49-2.png" width="768" /></p>
<p>Again, in tidyverse:</p>
<pre class="r"><code>ggplot(ANES, aes(x = FTM)) +
  geom_histogram(binwidth = 5) +
  theme_minimal()</code></pre>
<pre><code>## Warning: Removed 60 rows containing non-finite values (stat_bin).</code></pre>
<p><img src="Learning_files/figure-html/unnamed-chunk-50-1.png" width="768" /></p>
</div>
<div id="density-plots" class="section level3">
<h3>Density Plots</h3>
<p>We can also obtain kernel densities of our data:</p>
<pre class="r"><code>density(ANES$dem)</code></pre>
<pre><code>## 
## Call:
##  density.default(x = ANES$dem)
## 
## Data: ANES$dem (249 obs.);   Bandwidth &#39;bw&#39; = 0.05914
## 
##        x                  y            
##  Min.   :-0.17743   Min.   :0.0003078  
##  1st Qu.: 0.09549   1st Qu.:0.1572875  
##  Median : 0.36842   Median :0.6873645  
##  Mean   : 0.36842   Mean   :0.9147635  
##  3rd Qu.: 0.64135   3rd Qu.:1.5971476  
##  Max.   : 0.91428   Max.   :2.5217948</code></pre>
<pre class="r"><code>plot(density(ANES$dem))</code></pre>
<p><img src="Learning_files/figure-html/unnamed-chunk-51-1.png" width="768" /></p>
</div>
<div id="twoway-plots" class="section level3">
<h3>Twoway Plots</h3>
<p>Suppose now we want to explore two-way relations in our data. For
instance the two-way relation between height and weight of baseball
players:</p>
<pre class="r"><code>plot(x = baseball$heightinches, y = baseball$weightpounds,
     frame.plot = FALSE, xlab = &quot;height&quot;, ylab = &quot;weight&quot;,
     pch = 20) # pch is an option that selects the shape of dots we want 

# what if we want to add lines on this plot? We use the abline() function
# Maybe we want to plot a line corresponding to the mean height 
# lwd makes it thicker
abline(v = mean(baseball$heightinches, na.rm = TRUE), col = &quot;red&quot;, lwd = 5) </code></pre>
<p><img src="Learning_files/figure-html/unnamed-chunk-52-1.png" width="768" /></p>
<p>Again, tidyverse makes things much easier. Let’s re-do all the steps
we did before. First, we created a scatter plot. This time, let’s save
the plot in an object:</p>
<pre class="r"><code>my.plot &lt;- ggplot(baseball, aes(x = heightinches, y = weightpounds)) +
  geom_point() +
  theme_minimal()
my.plot</code></pre>
<p><img src="Learning_files/figure-html/unnamed-chunk-53-1.png" width="768" /></p>
<p>tidyverse makes it also simpler to save tidyverse plots:</p>
<pre class="r"><code>ggsave(my.plot, filename = &quot;my_first_ggplot.pdf&quot;)</code></pre>
<pre><code>## Saving 8 x 5 in image</code></pre>
</div>
</div>
</div>
<div id="run-basic-statistical-analyses" class="section level1">
<h1>Run Basic Statistical Analyses</h1>
<div id="t-tests" class="section level2">
<h2>T-Tests</h2>
<p>Suppose we would like to run a test to see if the population mean of
a random variable is distinguishable from 0 based on the data:</p>
<pre class="r"><code>t.test(ANES$poor) # by defaul it&#39;s a two-tailed t-test with null-value = 0</code></pre>
<pre><code>## 
##  One Sample t-test
## 
## data:  ANES$poor
## t = 24.661, df = 248, p-value &lt; 2.2e-16
## alternative hypothesis: true mean is not equal to 0
## 95 percent confidence interval:
##  0.1679421 0.1970962
## sample estimates:
## mean of x 
## 0.1825192</code></pre>
<p>Or you can also test if the true value is equal to other values:</p>
<pre class="r"><code>t.test(ANES$FTM, mu = 60)</code></pre>
<pre><code>## 
##  One Sample t-test
## 
## data:  ANES$FTM
## t = -1.7905, df = 188, p-value = 0.07498
## alternative hypothesis: true mean is not equal to 60
## 95 percent confidence interval:
##  57.44561 60.12363
## sample estimates:
## mean of x 
##  58.78462</code></pre>
<pre class="r"><code># ...and you can ask the test be one-sided:
t.test(ANES$FTM, mu = 60, alternative = &quot;less&quot;)</code></pre>
<pre><code>## 
##  One Sample t-test
## 
## data:  ANES$FTM
## t = -1.7905, df = 188, p-value = 0.03749
## alternative hypothesis: true mean is less than 60
## 95 percent confidence interval:
##      -Inf 59.90665
## sample estimates:
## mean of x 
##  58.78462</code></pre>
<pre class="r"><code>t.test(ANES$FTM, mu = 60, alternative = &quot;greater&quot;)</code></pre>
<pre><code>## 
##  One Sample t-test
## 
## data:  ANES$FTM
## t = -1.7905, df = 188, p-value = 0.9625
## alternative hypothesis: true mean is greater than 60
## 95 percent confidence interval:
##  57.66259      Inf
## sample estimates:
## mean of x 
##  58.78462</code></pre>
<p>We could also run difference-in-means tests. Suppose you want to test
if the mean height of players in the NYY team is different from the mean
height of players in the MIN team:</p>
<pre class="r"><code>t.test(x = baseball$heightinches[baseball$team == &quot;NYY&quot;],
       y = baseball$heightinches[baseball$team == &quot;MIN&quot;])</code></pre>
<pre><code>## 
##  Welch Two Sample t-test
## 
## data:  baseball$heightinches[baseball$team == &quot;NYY&quot;] and baseball$heightinches[baseball$team == &quot;MIN&quot;]
## t = 2.3469, df = 63, p-value = 0.02209
## alternative hypothesis: true difference in means is not equal to 0
## 95 percent confidence interval:
##  0.1860759 2.3196059
## sample estimates:
## mean of x mean of y 
##  74.34375  73.09091</code></pre>
<p><strong>YES, THEY ARE</strong>. Players in the Yankees are taller on
average.</p>
</div>
<div id="statistical-models" class="section level2">
<h2>Statistical models</h2>
<div id="linear-models" class="section level3">
<h3>Linear Models</h3>
<p>Now, we want to estimate a linear model using OLS. To do that, we
first import a dataset from an article by David Card (1993) on NBER:</p>
<pre class="r"><code>card &lt;- read_dta(&quot;Card_data.dta&quot;)
head(card)</code></pre>
<pre><code>## # A tibble: 6 x 17
##      id nearc2 nearc4  educ   age fatheduc motheduc weight black  smsa south
##   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1     2      0      0     7    29       NA       NA 158413     1     1     0
## 2     3      0      0    12    27        8        8 380166     0     1     0
## 3     4      0      0    12    34       14       12 367470     0     1     0
## 4     5      1      1    11    27       11       12 380166     0     1     0
## 5     6      1      1    12    34        8        7 367470     0     1     0
## 6     7      1      1    12    26        9       12 380166     0     1     0
## # … with 6 more variables: wage &lt;dbl&gt;, enroll &lt;dbl&gt;, IQ &lt;dbl&gt;, married &lt;dbl&gt;,
## #   exper &lt;dbl&gt;, expersq &lt;dbl&gt;</code></pre>
<p>Okay, let’s run a linear regression.</p>
<pre class="r"><code>model1 &lt;- lm(wage ~ exper, # your formula
             data = card) # where are the data stored
summary(model1)</code></pre>
<pre><code>## 
## Call:
## lm(formula = wage ~ exper, data = card)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -487.09 -183.28  -40.74  132.00 1830.26 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  560.394     11.312  49.538   &lt;2e-16 ***
## exper          1.907      1.157   1.648   0.0995 .  
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 262.9 on 3008 degrees of freedom
## Multiple R-squared:  0.0009021,  Adjusted R-squared:  0.0005699 
## F-statistic: 2.716 on 1 and 3008 DF,  p-value: 0.09945</code></pre>
<p>We probably would like to include some control variables in this
model specifications.</p>
<pre class="r"><code>model2 &lt;- lm(wage ~ exper + motheduc + fatheduc,
             data = card)
summary(model2)</code></pre>
<pre><code>## 
## Call:
## lm(formula = wage ~ exper + motheduc + fatheduc, data = card)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -606.64 -173.06  -34.19  121.98 1667.47 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  229.921     27.933   8.231 3.12e-16 ***
## exper         12.793      1.486   8.609  &lt; 2e-16 ***
## motheduc      12.300      2.308   5.330 1.08e-07 ***
## fatheduc      12.237      1.933   6.330 2.97e-10 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 255.1 on 2216 degrees of freedom
##   (790 observations deleted due to missingness)
## Multiple R-squared:  0.07555,    Adjusted R-squared:  0.0743 
## F-statistic: 60.37 on 3 and 2216 DF,  p-value: &lt; 2.2e-16</code></pre>
<p>From time to time, we need to transform some variables:</p>
<pre class="r"><code>model3 &lt;- lm(log(wage) ~ exper + motheduc + fatheduc,
             data = card)
summary(model3)</code></pre>
<pre><code>## 
## Call:
## lm(formula = log(wage) ~ exper + motheduc + fatheduc, data = card)
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -1.71548 -0.26955  0.02687  0.27698  1.60767 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) 5.697035   0.046392 122.803  &lt; 2e-16 ***
## exper       0.019757   0.002468   8.005 1.91e-15 ***
## motheduc    0.022918   0.003833   5.979 2.60e-09 ***
## fatheduc    0.018002   0.003211   5.607 2.32e-08 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.4236 on 2216 degrees of freedom
##   (790 observations deleted due to missingness)
## Multiple R-squared:  0.07294,    Adjusted R-squared:  0.07168 
## F-statistic: 58.12 on 3 and 2216 DF,  p-value: &lt; 2.2e-16</code></pre>
<p>And we could use extract_eq() to obtain the equation of the model
output:</p>
<pre class="r"><code>extract_eq(model3,wrap = TRUE, use_coefs = TRUE)</code></pre>
<p><span class="math display">\[
\begin{aligned}
\operatorname{\widehat{log(wage)}} &amp;= 5.7 +
0.02(\operatorname{\exper}) + 0.02(\operatorname{motheduc}) +
0.02(\operatorname{fatheduc})
\end{aligned}
\]</span></p>
<p>There are some very good packages to produce neat regression tables
out there to present our results. The choice between them depends mostly
on the type of models that they can support. Two equally good choices
are <strong>stargazer</strong> and <strong>texreg</strong>.</p>
<p>We’ll use stargazer today:</p>
<pre class="r"><code># let&#39;s see how stargazer works
stargazer(model1, model2, model3, type = &quot;text&quot;,
          keep.stat = c(&quot;n&quot;, &quot;rsq&quot;, &quot;adj.rsq&quot;, &quot;f&quot;), df = FALSE)</code></pre>
<pre><code>## 
## ============================================
##                    Dependent variable:      
##              -------------------------------
##                      wage          log(wage)
##                 (1)        (2)        (3)   
## --------------------------------------------
## exper          1.907*   12.793***  0.020*** 
##               (1.157)    (1.486)    (0.002) 
##                                             
## motheduc                12.300***  0.023*** 
##                          (2.308)    (0.004) 
##                                             
## fatheduc                12.237***  0.018*** 
##                          (1.933)    (0.003) 
##                                             
## Constant     560.394*** 229.921*** 5.697*** 
##               (11.312)   (27.933)   (0.046) 
##                                             
## --------------------------------------------
## Observations   3,010      2,220      2,220  
## R2             0.001      0.076      0.073  
## Adjusted R2    0.001      0.074      0.072  
## F Statistic    2.716*   60.366***  58.117***
## ============================================
## Note:            *p&lt;0.1; **p&lt;0.05; ***p&lt;0.01</code></pre>
<pre class="r"><code>?stargazer</code></pre>
<pre class="r"><code># we can also extract statistics and information from our model objects:
model3$coefficients</code></pre>
<pre><code>## (Intercept)       exper    motheduc    fatheduc 
##  5.69703504  0.01975653  0.02291837  0.01800203</code></pre>
<pre class="r"><code># model3$residuals
fit &lt;- model3$fitted.values

# and more:
summary(model3)$coefficients[,1] # these are the coefficients (the betas)</code></pre>
<pre><code>## (Intercept)       exper    motheduc    fatheduc 
##  5.69703504  0.01975653  0.02291837  0.01800203</code></pre>
<pre class="r"><code>summary(model3)$coefficients[,2] # these are the standard errors of our coefficients</code></pre>
<pre><code>## (Intercept)       exper    motheduc    fatheduc 
## 0.046391537 0.002467970 0.003832941 0.003210862</code></pre>
<pre class="r"><code>summary(model3)$coefficients[,3] # these are the t-statistics</code></pre>
<pre><code>## (Intercept)       exper    motheduc    fatheduc 
##  122.803326    8.005173    5.979318    5.606604</code></pre>
<pre class="r"><code>summary(model3)$coefficients[,4] # these are the p-values</code></pre>
<pre><code>##  (Intercept)        exper     motheduc     fatheduc 
## 0.000000e+00 1.906293e-15 2.604881e-09 2.320346e-08</code></pre>
<pre class="r"><code># of course we could save this information in R objects</code></pre>
</div>
<div id="generalized-linear-models" class="section level3">
<h3>Generalized Linear Models</h3>
<p>Most statistical models in R have a syntax very similar to the one
adopted by lm().Covering these models is not part of today’s class, but
we might want to show that other models, such as those in the family of
the generalized linear model (GLM),work very similarly. Suppose we want
to explain if a person went to college based on the years of education
of the father and mother. A logit or probit model would be
appropriate:</p>
<pre class="r"><code>mod.glm &lt;- glm(enroll ~ fatheduc + motheduc +
                 black + smsa + south + IQ,
               data = card,
               family = binomial(link = &quot;logit&quot;))
summary(mod.glm)</code></pre>
<pre><code>## 
## Call:
## glm(formula = enroll ~ fatheduc + motheduc + black + smsa + south + 
##     IQ, family = binomial(link = &quot;logit&quot;), data = card)
## 
## Deviance Residuals: 
##     Min       1Q   Median       3Q      Max  
## -0.7942  -0.5148  -0.4540  -0.3783   2.5100  
## 
## Coefficients:
##              Estimate Std. Error z value Pr(&gt;|z|)    
## (Intercept) -4.761790   0.685262  -6.949 3.68e-12 ***
## fatheduc     0.023338   0.030060   0.776   0.4375    
## motheduc     0.021301   0.036043   0.591   0.5545    
## black        0.423930   0.279064   1.519   0.1287    
## smsa         0.532584   0.216436   2.461   0.0139 *  
## south        0.349561   0.172519   2.026   0.0427 *  
## IQ           0.014955   0.006134   2.438   0.0148 *  
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## (Dispersion parameter for binomial family taken to be 1)
## 
##     Null deviance: 1109.0  on 1618  degrees of freedom
## Residual deviance: 1086.2  on 1612  degrees of freedom
##   (1391 observations deleted due to missingness)
## AIC: 1100.2
## 
## Number of Fisher Scoring iterations: 5</code></pre>
<pre class="r"><code>screenreg(mod.glm)</code></pre>
<pre><code>## 
## ===========================
##                 Model 1    
## ---------------------------
## (Intercept)       -4.76 ***
##                   (0.69)   
## fatheduc           0.02    
##                   (0.03)   
## motheduc           0.02    
##                   (0.04)   
## black              0.42    
##                   (0.28)   
## smsa               0.53 *  
##                   (0.22)   
## south              0.35 *  
##                   (0.17)   
## IQ                 0.01 *  
##                   (0.01)   
## ---------------------------
## AIC             1100.16    
## BIC             1137.88    
## Log Likelihood  -543.08    
## Deviance        1086.16    
## Num. obs.       1619       
## ===========================
## *** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
</div>
</div>
<div id="additional-sources" class="section level1">
<h1>Additional Sources</h1>
<div id="some-additional-packages" class="section level2">
<h2>Some additional packages</h2>
<table>
<colgroup>
<col width="26%" />
<col width="26%" />
<col width="47%" />
</colgroup>
<thead>
<tr class="header">
<th>Type</th>
<th>Package Name</th>
<th>Aim</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Data import</td>
<td>readr</td>
<td>Import files from various formats</td>
</tr>
<tr class="even">
<td></td>
<td>foreign</td>
<td></td>
</tr>
<tr class="odd">
<td>Data Cleaning</td>
<td>reshape</td>
<td>Turning long datasets into wide and vice versa</td>
</tr>
<tr class="even">
<td>Plots</td>
<td>ggplot2</td>
<td>Plots based on grammar of graphics</td>
</tr>
<tr class="odd">
<td></td>
<td>ggpubr</td>
<td>ggplot2-based publication-ready plots</td>
</tr>
<tr class="even">
<td>Standard errors</td>
<td>sandwich + lmtest</td>
<td>Robust and cluster + test coeffcients</td>
</tr>
<tr class="odd">
<td>Modelling</td>
<td>plm</td>
<td>Panel data models</td>
</tr>
<tr class="even">
<td></td>
<td>margins or ggeffects</td>
<td>Marginal effects from models</td>
</tr>
<tr class="odd">
<td></td>
<td>marginaleffects</td>
<td>Marginal effects from models</td>
</tr>
<tr class="even">
<td></td>
<td>AER</td>
<td>Various (Instrumental variable, tobit models)</td>
</tr>
<tr class="odd">
<td></td>
<td>mlogit or mnlogit</td>
<td>Multinominal logit models</td>
</tr>
<tr class="even">
<td></td>
<td>lme4</td>
<td>Multilevel models</td>
</tr>
<tr class="odd">
<td></td>
<td>rdd</td>
<td>Regression discontinuity design</td>
</tr>
<tr class="even">
<td></td>
<td>zoo or forecast</td>
<td>Time series tools</td>
</tr>
<tr class="odd">
<td>Latent Variable</td>
<td>psych</td>
<td>Exploratory Factor Analysis</td>
</tr>
<tr class="even">
<td></td>
<td>lavaan</td>
<td>CFA/SEM</td>
</tr>
<tr class="odd">
<td>Webscraping</td>
<td>rvest</td>
<td>Webscraping</td>
</tr>
<tr class="even">
<td></td>
<td>httr</td>
<td>Webscraping, APIs</td>
</tr>
<tr class="odd">
<td></td>
<td>RSelenium</td>
<td>Scraping dynamic websites</td>
</tr>
<tr class="even">
<td>Text Data</td>
<td>quanteda</td>
<td>Text data mining and wrangling</td>
</tr>
<tr class="odd">
<td>Twitter Data</td>
<td>rtweet</td>
<td>Mining Tweets</td>
</tr>
<tr class="even">
<td>Spatial Data</td>
<td>tmap</td>
<td>Drawing thematic maps</td>
</tr>
<tr class="odd">
<td></td>
<td>sf</td>
<td>Spatial Manipulaytion</td>
</tr>
<tr class="even">
<td>Color Palette</td>
<td>MetBrewer</td>
<td>Palettes inspired by works at the Metropolitan Museum of Art in New
York</td>
</tr>
</tbody>
</table>
</div>
<div id="user-written-functions" class="section level2">
<h2>User-written functions</h2>
<p>User-written <strong>functions</strong> allow you to create a
function which runs a series of commands, it can include and input and
output variable. You must also name the function yourself. Once the
function has been run, it is saved in your work environment by R and you
can run data through it by calling it as you would do with any other
function in R (I.e. myfunction(data)).</p>
<p>The general structure looks like:</p>
<pre class="r"><code>myfunction &lt;- function(x){
  a &lt;- x/2
  return(a)
}</code></pre>
<p>Let’s test the newly-created function:</p>
<pre class="r"><code>myfunction(4)</code></pre>
<pre><code>## [1] 2</code></pre>
</div>
<div id="loop" class="section level2">
<h2>Loop</h2>
<p>A loop is a means to repeat code under defined conditions. This is a
great way for reducing the amount of code you may need to write. For
example, you could use the loop to iterate a series of commands through
a number of different positions (i.e. rows) in a data frame.</p>
<p>The most basic means of looping commands in R is known as the for
loop. To implement it, you run the <code>for()</code> function and
within the parameters, you define the sequence through which the loop
will input data. Usually, an argument is assigned (i) and given a range
of numerical positions (i.e. <code>in 2:5</code> which runs from
position 2 to position 5). You next enter the commands which the loop
will run within curly brackets following the parameters. The defined
argument (i) is used to determine the input data for each iteration.
This has been demonstrated in the example below which loops the code for
four columns of our data frame.</p>
</div>
<div id="ifelse-statements" class="section level2">
<h2>If/else statements</h2>
<p>There are various commands we can run within for loops to edit their
functionality. If-else statements allow us to change the outcome of the
loop depending on a particular statement. For instance, if a value is
below a certain threshold, you can tell the loop to round it up,
otherwise (else) do nothing.</p>
<p>Okay, let’s take a look at the WDI dataset again.</p>
<pre class="r"><code>glimpse(wdi_data)</code></pre>
<pre><code>## Rows: 5,586
## Columns: 12
## $ iso2c         &lt;chr&gt; &quot;1A&quot;, &quot;1A&quot;, &quot;1A&quot;, &quot;1A&quot;, &quot;1A&quot;, &quot;1A&quot;, &quot;1A&quot;, &quot;1A&quot;, &quot;1A&quot;, &quot;1…
## $ country       &lt;chr&gt; &quot;Arab World&quot;, &quot;Arab World&quot;, &quot;Arab World&quot;, &quot;Arab World&quot;, …
## $ year          &lt;int&gt; 2005, 2004, 2017, 2016, 2008, 2006, 2003, 2007, 2012, 20…
## $ population    &lt;dbl&gt; 314965776, 307862846, 411942825, 404042892, 338395936, 3…
## $ gdp_percapita &lt;dbl&gt; 5532.099, 5363.638, 6386.722, 6431.676, 6029.585, 5732.2…
## $ iso3c         &lt;chr&gt; &quot;ARB&quot;, &quot;ARB&quot;, &quot;ARB&quot;, &quot;ARB&quot;, &quot;ARB&quot;, &quot;ARB&quot;, &quot;ARB&quot;, &quot;ARB&quot;, …
## $ region        &lt;chr&gt; &quot;Aggregates&quot;, &quot;Aggregates&quot;, &quot;Aggregates&quot;, &quot;Aggregates&quot;, …
## $ capital       &lt;chr&gt; &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, …
## $ longitude     &lt;chr&gt; &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, …
## $ latitude      &lt;chr&gt; &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, …
## $ income        &lt;chr&gt; &quot;Aggregates&quot;, &quot;Aggregates&quot;, &quot;Aggregates&quot;, &quot;Aggregates&quot;, …
## $ lending       &lt;chr&gt; &quot;Aggregates&quot;, &quot;Aggregates&quot;, &quot;Aggregates&quot;, &quot;Aggregates&quot;, …</code></pre>
<p>If we would like to create a new binary variable based whether the
country is located in Europe and Central Asia, we could write:</p>
<pre class="r"><code>wdi_data$euro_central &lt;- ifelse(wdi_data$region == &quot;Europe &amp; Central Asia&quot;, TRUE, FALSE)
table(wdi_data$region)</code></pre>
<pre><code>## 
##                 Aggregates        East Asia &amp; Pacific 
##                        945                        756 
##      Europe &amp; Central Asia  Latin America &amp; Caribbean 
##                       1197                        882 
## Middle East &amp; North Africa              North America 
##                        441                         63 
##                 South Asia         Sub-Saharan Africa 
##                        168                       1008</code></pre>
<pre class="r"><code>table(wdi_data$euro_central)</code></pre>
<pre><code>## 
## FALSE  TRUE 
##  4263  1197</code></pre>
</div>
</div>
<div id="appendix-r-script" class="section level1">
<h1>Appendix: R Script</h1>
<pre class="r"><code>knitr::opts_chunk$set(echo = TRUE)
#install.packages(c(&quot;dplyr&quot;,&quot;haven&quot;,&quot;readr&quot;, &quot;tidyr&quot;,&quot;ggplot2&quot;,&quot;texreg&quot;,&quot;stringr&quot;,&quot;stringi&quot;,&quot;WDI&quot;))
library(haven)        # Import Data
library(readr)        # Import Data
library(dplyr)        # Data manipulation
library(ggplot2)      # Creating graphics
library(stringr)      # Deal with string data
library(kableExtra)   # Build complex tables and manipulate table styles
library(WDI)          # Get data from the World Bank&#39;s API
library(psych)        # We use the describe() function from this package for summary statistics.
library(texreg)       # Convert regression output to Table
library(stargazer)    # Convert regression output to Table
library(equatiomatic) # Provide an automatic way to show the equations of models fitted in R.
0
1.5
3/4
&quot;Hello world&quot;
a &lt;- 2
a
my_string &lt;- c(&quot;hello&quot;,&quot;world&quot;,&quot;today&quot;,&quot;is&quot;,&quot;amazing&quot;)
a == my_string
a != my_string
sqrt(4)
?sqrt
?log
log(2, 10)
log(sqrt(4), 10) # gives exactly the same as log(2, 10) above as sqrt(4) = 2
?paste
paste(&quot;This&quot;, &quot;is&quot;, &quot;a&quot;, &quot;full&quot;, &quot;sentence&quot;)
paste(&quot;This&quot;, &quot;is&quot;, &quot;a&quot;, &quot;full&quot;, &quot;sentence&quot;, sep=&quot;-&quot;)
my.first.vector &lt;- c(1, 5, 2, 6, 8, 9, 12, 2.4, 0.3, -2.56, 3/4, 2+3)
# the c() function stands for &quot;concatenate&quot; and is used to join objects together
my.first.vector
length(my.first.vector)
my.first.vector[8] # the value of the eighth element in our vector
my.first.vector[1] # the value of the first element in our vector
a.string.vector &lt;- c(&quot;here&quot;, &quot;are&quot;, &quot;some&quot;, &quot;elements&quot;)
a.string.vector
class(my.first.vector)
class(a.string.vector)
c &lt;- &quot;hello&quot;
d &lt;- &quot;world&quot;
paste(c, d, sep = &quot;&quot;)
c(c, d)
paste(c, d, sep = &quot;,&quot;) # specifies the separator of the two objects!
paste0(c, d)
m &lt;- matrix(data = 1:12,  # the data in our matrix. Pick all integers from 1 to 12 (included)
            nrow = 3,     # the number of rows 
            ncol = 4,     # the number of columns
            byrow = TRUE) # do we want data to be stored in cells by row or by column?
m
m[2,4] # the object in the 2nd row, 4th column
m[,1]  # all the first column
m[1,]  # all the first row
colnames(m) &lt;- c(&quot;one&quot;, &quot;two&quot;, &quot;three&quot;, &quot;four&quot;)
rownames(m) &lt;- c(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;)
m
datafr &lt;- data.frame(
  var1 = c(rep(&quot;a&quot;, 3), rep(&quot;b&quot;, 4), rep(&quot;c&quot;, 2), &quot;d&quot;),
  var2 = rnorm(n = 10, mean = 0, sd = 1.3), # here we are drawing 10 random values from a 
  # normal distribution with mean = 0 and sd = 1.3
  var3 = c(1, -4, 2, 4.2, 5.3333, 1/9, 7.5, 0.000, 1-12, sqrt(2)) # notice that here we are
  # creating a vector where the elements are expressions! We also include the squared root of 2
)

datafr

df &lt;- data.frame(var1 = c(rep(&quot;a&quot;, 3), rep(&quot;b&quot;, 4), rep(&quot;c&quot;, 2), &quot;d&quot;),
                 var2 = c(1,2,3,4,5,NA,7,8,9,10))
df # we have a missing value in var2

class(datafr)
datafr$var1 # this gives us precisely the object we want.
datafr$var3

datafr$var2
df$var2

class(datafr)
class(datafr$var1)
class(datafr$var2)
class(datafr$var3)
ls &lt;- list(df, datafr, datafr$var2)
ls

ls2 &lt;- list(df, ls)
ls2
rm(list = ls())
setwd(&quot;~/Desktop/ESS_3x_website&quot;)
ANES &lt;- read_dta(&quot;anesByState.dta&quot;)
head(ANES)
csvfile &lt;- &quot;https://raw.githubusercontent.com/lorenzo-crippa/Intro_to_R/master/2021/baseball.csv&quot;
baseball &lt;- read.csv(csvfile)
head(baseball)
url &lt;- &quot;http://www.principlesofeconometrics.com/stata/broiler.dta&quot;
data.df &lt;- read_dta(url)
head(data.df)
wdi_data &lt;- WDI(country = &quot;all&quot;, 
               indicator = c(population = &quot;SP.POP.TOTL&quot;,
                             gdp_percapita = &quot;NY.GDP.PCAP.KD&quot;), 
               start = 2000, end = 2020, extra = TRUE)
head(wdi_data)
#install.packages(&quot;tidyverse&quot;)
library(tidyverse)
baseball.no.CLE &lt;- baseball[baseball$team != &quot;CLE&quot;, ]
baseball.2 &lt;- baseball[baseball$team == &quot;NYY&quot;, 2:4]
ANES &lt;- filter(ANES, # what is your data frame? 
               year != 2000) # the condition you impose
ANES &lt;- select(ANES, 
               -turnout) # keep everything BUT the variable named &quot;turnout&quot;

ANES[order(ANES[,2], ANES[,1]),]
unique(ANES$year) # all possible years in the ANES dataset
# we might want to have it sorted:
sort(unique(ANES$year)) # years from 1952 to 2008 by 2-year distance. 

ANES$new.var &lt;- ANES$poor^2

# we can also do it in tidyverse by doing:
ANES &lt;- mutate(ANES,
               new.var2 = poor*2)
ANES$indicator &lt;- ifelse(test = ANES$year &gt;= 2000, yes = 1, no = 0)
unique(ANES$indicator)
names(ANES)   # obtain all the variable names of a dataset
head(ANES)    
glimpse(ANES) # get a glimpse of your data.
summary(ANES$poor)
mean(ANES$voteDem) 
sd(ANES$poor)
median(ANES$dem)
min(ANES$year)
max(ANES$voteDem)
quantile(ANES$poor, 0.3) # the observation that leaves 30% of the observations to its left
quantile(ANES$poor, 0.5) # this will be the median of course!
median(ANES$poor)
var(ANES$dem) # the variance
table(ANES$year) # how often does each occurrence appear?
range(ANES$year)
boxplot(ANES$white)

# we can then intervene on options and modify its appearance:
boxplot(ANES$white, frame = F, ylab = &quot;white&quot;, main = &quot;A boxplot&quot;)
?boxplot
# this would be the tidyverse way of doing it:
ggplot(ANES, aes(y = white)) +
         geom_boxplot() +
         theme_minimal()
hist(ANES$FTM, main = &quot;Histogram of FTM&quot;, xlab = &quot;FTM&quot;)

# and we can also intervene in the plot with options:
hist(ANES$FTM, main = &quot;Histogram of FTM&quot;, xlab = &quot;FTM&quot;, probability = TRUE) # to have probabilities
ggplot(ANES, aes(x = FTM)) +
  geom_histogram(binwidth = 5) +
  theme_minimal()
density(ANES$dem)
plot(density(ANES$dem))
plot(x = baseball$heightinches, y = baseball$weightpounds,
     frame.plot = FALSE, xlab = &quot;height&quot;, ylab = &quot;weight&quot;,
     pch = 20) # pch is an option that selects the shape of dots we want 

# what if we want to add lines on this plot? We use the abline() function
# Maybe we want to plot a line corresponding to the mean height 
# lwd makes it thicker
abline(v = mean(baseball$heightinches, na.rm = TRUE), col = &quot;red&quot;, lwd = 5) 
my.plot &lt;- ggplot(baseball, aes(x = heightinches, y = weightpounds)) +
  geom_point() +
  theme_minimal()
my.plot
ggsave(my.plot, filename = &quot;my_first_ggplot.pdf&quot;)
t.test(ANES$poor) # by defaul it&#39;s a two-tailed t-test with null-value = 0
t.test(ANES$FTM, mu = 60)

# ...and you can ask the test be one-sided:
t.test(ANES$FTM, mu = 60, alternative = &quot;less&quot;)
t.test(ANES$FTM, mu = 60, alternative = &quot;greater&quot;)
t.test(x = baseball$heightinches[baseball$team == &quot;NYY&quot;],
       y = baseball$heightinches[baseball$team == &quot;MIN&quot;])
card &lt;- read_dta(&quot;Card_data.dta&quot;)
head(card)
model1 &lt;- lm(wage ~ exper, # your formula
             data = card) # where are the data stored
summary(model1)
model2 &lt;- lm(wage ~ exper + motheduc + fatheduc,
             data = card)
summary(model2)
model3 &lt;- lm(log(wage) ~ exper + motheduc + fatheduc,
             data = card)
summary(model3)
extract_eq(model3,wrap = TRUE, use_coefs = TRUE)
# let&#39;s see how stargazer works
stargazer(model1, model2, model3, type = &quot;text&quot;,
          keep.stat = c(&quot;n&quot;, &quot;rsq&quot;, &quot;adj.rsq&quot;, &quot;f&quot;), df = FALSE)
?stargazer
# we can also extract statistics and information from our model objects:
model3$coefficients
# model3$residuals
fit &lt;- model3$fitted.values

# and more:
summary(model3)$coefficients[,1] # these are the coefficients (the betas)
summary(model3)$coefficients[,2] # these are the standard errors of our coefficients
summary(model3)$coefficients[,3] # these are the t-statistics
summary(model3)$coefficients[,4] # these are the p-values
# of course we could save this information in R objects
mod.glm &lt;- glm(enroll ~ fatheduc + motheduc +
                 black + smsa + south + IQ,
               data = card,
               family = binomial(link = &quot;logit&quot;))
summary(mod.glm)
screenreg(mod.glm)
myfunction &lt;- function(x){
  a &lt;- x/2
  return(a)
}
myfunction(4)
glimpse(wdi_data)
wdi_data$euro_central &lt;- ifelse(wdi_data$region == &quot;Europe &amp; Central Asia&quot;, TRUE, FALSE)
table(wdi_data$region)
table(wdi_data$euro_central)</code></pre>
</div>
</div>

   
   
              </div>
  </div>
  </div>
  </div>
   
      

  <script>
    $(document).ready(function () {

		// add bootstrap table styles to pandoc tables
	$('tr.header').parent('thead').parent('table').addClass('table table-condensed');
		
 	 	$('#content img').addClass("image-thumb");
		
		$('#content img:not(.no-lightbox)').addClass("image-lb");
	$('#content').magnificPopup({
	    type:'image',
	    closeOnContentClick: false,
	    closeBtnInside: false,
	    delegate: '.image-lb',
	    gallery: {enabled: false },
	    image: {
	        verticalFit: true,
		titleSrc: 'alt'
	    }
 	});
 	    });
  </script>



    <!-- dynamically load mathjax for compatibility with self-contained -->
  <script>
    (function () {
	var script = document.createElement("script");
	script.type = "text/javascript";
	script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
	document.getElementsByTagName("head")[0].appendChild(script);
    })();
  </script>
  
</body>
</html>
